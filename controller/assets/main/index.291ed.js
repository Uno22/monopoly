window.__require=function t(e,r,n){function o(c,a){if(!r[c]){if(!e[c]){var u=c.split("/");if(u=u[u.length-1],!e[u]){var s="function"==typeof __require&&__require;if(!a&&s)return s(u,!0);if(i)return i(u,!0);throw new Error("Cannot find module '"+c+"'")}c=u}var f=r[c]={exports:{}};e[c][0].call(f.exports,function(t){return o(e[c][1][t]||t)},f,f.exports,t,e,r,n)}return r[c].exports}for(var i="function"==typeof __require&&__require,c=0;c<n.length;c++)o(n[c]);return o}({ButtonClickEvent:[function(t,e,r){"use strict";cc._RF.push(e,"4585f2oT4FM87zy3pXHhtST","ButtonClickEvent");var n=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(c=(i<3?o(c):i>3?o(e,r,c):o(e,r))||c);return i>3&&c&&Object.defineProperty(e,r,c),c};Object.defineProperty(r,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,a=i.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ClickInterval=.5,e.activeBgColor=cc.Color.BLUE,e.activeTextColor=cc.Color.WHITE,e.deactiveBgColor=cc.Color.GRAY,e.deactiveTextColor=cc.Color.BLACK,e}return n(e,t),Object.defineProperty(e.prototype,"Interactive",{get:function(){return this.mInteractive},set:function(t){this.mInteractive=t,this.mInteractive?(this.bg.color=this.activeBgColor,this.text.color=this.activeTextColor):(this.bg.color=this.deactiveBgColor,this.text.color=this.deactiveTextColor)},enumerable:!1,configurable:!0}),e.prototype.registerEvent=function(t){var e=this;this.node.on(cc.Node.EventType.TOUCH_END,function(){e.onClick(t)})},e.prototype.onEnable=function(){this.mInteractive=!0,this.mTimer=this.ClickInterval},e.prototype.update=function(t){-1!=this.ClickInterval&&(this.mInteractive||(this.mTimer-=t,this.mTimer<0&&(this.mInteractive=!0,this.mTimer=this.ClickInterval)))},e.prototype.onClick=function(t){this.mInteractive&&(this.mInteractive=!1,t())},o([a(cc.Float)],e.prototype,"ClickInterval",void 0),o([a(cc.Node)],e.prototype,"bg",void 0),o([a(cc.Node)],e.prototype,"text",void 0),o([a(cc.Color)],e.prototype,"activeBgColor",void 0),o([a(cc.Color)],e.prototype,"activeTextColor",void 0),o([a(cc.Color)],e.prototype,"deactiveBgColor",void 0),o([a(cc.Color)],e.prototype,"deactiveTextColor",void 0),e=o([c],e)}(cc.Component);r.default=u,cc._RF.pop()},{}],CancelUnderTouch:[function(t,e,r){"use strict";cc._RF.push(e,"2ec87SVD/NEM5jDixtpR20Q","CancelUnderTouch");var n=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(c=(i<3?o(c):i>3?o(e,r,c):o(e,r))||c);return i>3&&c&&Object.defineProperty(e,r,c),c};Object.defineProperty(r,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,a=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_START,function(){},this)},e=o([c],e)}(cc.Component));r.default=a,cc._RF.pop()},{}],GameDefine:[function(t,e,r){"use strict";cc._RF.push(e,"14778wKPEdE4ITtVCflr1+E","GameDefine"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=new(function(){return function(){this.TIME_CHECK_DISCONNECT=3}}()),cc._RF.pop()},{}],Home:[function(t,e,r){"use strict";cc._RF.push(e,"62873e/UmNDWac7AhVffKhg","Home");var n=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(c=(i<3?o(c):i>3?o(e,r,c):o(e,r))||c);return i>3&&c&&Object.defineProperty(e,r,c),c};Object.defineProperty(r,"__esModule",{value:!0});var i=t("../utils/SingletonNode"),c=t("../peer/PeerConnection"),a=cc._decorator,u=a.ccclass,s=a.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sip=null,e}return n(e,t),e.prototype.initSIP=function(){this.sip.string=c.default.Instance.sip+""},o([s(cc.Label)],e.prototype,"sip",void 0),e=o([u],e)}(i.default());r.default=f,cc._RF.pop()},{"../peer/PeerConnection":"PeerConnection","../utils/SingletonNode":"SingletonNode"}],LoadingCover:[function(t,e,r){"use strict";cc._RF.push(e,"f0006x5yvJNraLWMEsasTtY","LoadingCover");var n=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(c=(i<3?o(c):i>3?o(e,r,c):o(e,r))||c);return i>3&&c&&Object.defineProperty(e,r,c),c};Object.defineProperty(r,"__esModule",{value:!0});var i=t("../utils/SingletonNode"),c=cc._decorator,a=c.ccclass,u=c.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.Container=null,e}return n(e,t),e.prototype.show=function(){this.Container.active=!0},e.prototype.hide=function(){this.Container.active=!1},o([u(cc.Node)],e.prototype,"Container",void 0),e=o([a],e)}(i.default());r.default=s,cc._RF.pop()},{"../utils/SingletonNode":"SingletonNode"}],PeerConnection:[function(t,e,r){"use strict";cc._RF.push(e,"cf4fbOYPalCOYilukTfmADj","PeerConnection");var n=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(c=(i<3?o(c):i>3?o(e,r,c):o(e,r))||c);return i>3&&c&&Object.defineProperty(e,r,c),c};Object.defineProperty(r,"__esModule",{value:!0});var i=t("../utils/SingletonNode"),c=t("../utils/helper"),a=t("../ui/PlayerUI"),u=t("../utils/State"),s=cc._decorator,f=s.ccclass,p=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.peer=null,e.tvPeer=null,e.sip=0,e.tvsip=0,e}return n(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this);var e=new URLSearchParams(window.location.search);this.tvsip=parseInt(e.get("sip"))||0},e.prototype.start=function(){},e.prototype.update=function(t){this.peer&&!this.sip&&(this.sip=this.peer.getSIP(),console.log("controller sip",this.sip))},e.prototype.init=function(){this.peer=window.getPeerClient()},e.prototype.setTVPeer=function(t){this.tvPeer=t},e.prototype.sendTo=function(t){if(this.peer){t.data=t.data||{};var e=t.data;!e.nick&&a.default.Instance.Nick&&(e.nick=a.default.Instance.Nick);try{this.peer.sendTo(this.tvsip,JSON.stringify(t))}catch(t){console.log("sendTo catch")}t.type!=u.PeerPlayerState.PING&&t.type!=u.PeerPlayerState.PONG&&(void 0!=e.action&&(e.action=u.PlayerState[e.action]),c.default.log("controller sip="+this.sip+" nick="+e.nick+" sendTo tvsip="+this.tvsip+" type="+t.type+" msg="+JSON.stringify(t)))}},e=o([f],e)}(i.default()));r.default=p,cc._RF.pop()},{"../ui/PlayerUI":"PlayerUI","../utils/SingletonNode":"SingletonNode","../utils/State":"State","../utils/helper":"helper"}],PlayerUI:[function(t,e,r){"use strict";cc._RF.push(e,"e5cd0mBuktHQJXuYfBCezI3","PlayerUI");var n=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(c=(i<3?o(c):i>3?o(e,r,c):o(e,r))||c);return i>3&&c&&Object.defineProperty(e,r,c),c};Object.defineProperty(r,"__esModule",{value:!0});var i=t("../utils/SingletonNode"),c=t("../utils/State"),a=t("../popup/PopupMgr"),u=cc._decorator,s=u.ccclass,f=u.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.txtWaitForYourTurn="Wait For Your Turn",e.txtYourTurn="Your Turn",e.txtCrash="Crash",e}return n(e,t),Object.defineProperty(e.prototype,"Nick",{get:function(){return this.mNick},enumerable:!1,configurable:!0}),e.prototype.onEnable=function(){this.setActiveProfile(!1)},e.prototype.initProfile=function(t,e){this.mNick=t,this.nick.string=t;var r=new cc.Color;cc.Color.fromHEX(r,e),this.color.color=r,this.setActiveProfile(!0)},e.prototype.setActiveProfile=function(t){void 0===t&&(t=!0),this.nick.node.active=t,this.color.active=t},e.prototype.updateAction=function(t){var e=c.PlayerState.INIT,r=c.PlayerState.WAITING,n=c.PlayerState.REQUEST_SHAKE_DICE,o=c.PlayerState.MOVE_TO_TARGET,i=c.PlayerState.MOVE_COMPLETE,u=c.PlayerState.CRASH,s=t.action;switch(this.mAction=s,s){case e:case r:this.setStatus(this.txtWaitForYourTurn);break;case n:this.setStatus(this.txtYourTurn),a.default.Instance.push("Popup Shake Dice");break;case o:case i:this.setStatus(this.txtYourTurn);break;case u:this.setStatus(this.txtCrash)}},e.prototype.setStatus=function(t){this.status.string=t},o([f(cc.Label)],e.prototype,"nick",void 0),o([f(cc.Node)],e.prototype,"color",void 0),o([f(cc.Label)],e.prototype,"status",void 0),e=o([s],e)}(i.default());r.default=p,cc._RF.pop()},{"../popup/PopupMgr":"PopupMgr","../utils/SingletonNode":"SingletonNode","../utils/State":"State"}],PopupLostConnection:[function(t,e,r){"use strict";cc._RF.push(e,"c92edYJWLhEsqfK9rqb80e1","PopupLostConnection");var n=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(c=(i<3?o(c):i>3?o(e,r,c):o(e,r))||c);return i>3&&c&&Object.defineProperty(e,r,c),c};Object.defineProperty(r,"__esModule",{value:!0});var i=t("./PopupMgr"),c=t("../ui/ButtonClickEvent"),a=t("../stages/StageMgr"),u=cc._decorator,s=u.ccclass,f=u.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnRetry=null,e}return n(e,t),e.prototype.onLoad=function(){this.btnRetry.registerEvent(this.onRetry.bind(this))},e.prototype.onEnable=function(){this.btnRetry.Interactive=!0},e.prototype.onRetry=function(){i.default.Instance.pop(i.POPUP_EFFECT.APPEAR),a.default.Instance.onReconnect()},o([f(c.default)],e.prototype,"btnRetry",void 0),e=o([s],e)}(cc.Component);r.default=p,cc._RF.pop()},{"../stages/StageMgr":"StageMgr","../ui/ButtonClickEvent":"ButtonClickEvent","./PopupMgr":"PopupMgr"}],PopupMgr:[function(t,e,r){"use strict";cc._RF.push(e,"55b69Pl4UBFs4ejkN/XK7Ay","PopupMgr");var n=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(c=(i<3?o(c):i>3?o(e,r,c):o(e,r))||c);return i>3&&c&&Object.defineProperty(e,r,c),c};Object.defineProperty(r,"__esModule",{value:!0}),r.POPUP_EFFECT=void 0;var i,c=t("../utils/SingletonNode"),a=cc._decorator,u=a.ccclass,s=a.property;(function(t){t[t.APPEAR=0]="APPEAR",t[t.SCALE=1]="SCALE"})(i=r.POPUP_EFFECT||(r.POPUP_EFFECT={}));var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.PopupBackground=null,e.PopupContainer=null,e.ShownPopups=null,e}return n(e,t),e.prototype.start=function(){this.PopupBackground.active=!1,this.PopupContainer.active=!1;for(var t=0,e=this.PopupContainer.children;t<e.length;t++){e[t].active=!0}},e.prototype.push=function(t,e,r,n){void 0===e&&(e=i.SCALE),void 0===r&&(r="smooth"),void 0===n&&(n=.5);var o=this.PopupContainer.getChildByName(t);o&&(this.usePopup(o),this.animate(!0,o,e,r,n),this.PopupBackground.active=!0)},e.prototype.pop=function(t,e,r){if(void 0===t&&(t=i.SCALE),void 0===e&&(e="smooth"),void 0===r&&(r=.5),this.ShownPopups.children.length>0){var n=this.ShownPopups.children[this.ShownPopups.children.length-1];this.animate(!1,n,t,e,r)}},e.prototype.hide=function(t,e,r,n){void 0===e&&(e=i.SCALE),void 0===r&&(r="smooth"),void 0===n&&(n=.5);var o=this.ShownPopups.getChildByName(t);o&&this.animate(!1,o,e,r,n)},e.prototype.hideAll=function(){for(var t=this.ShownPopups.children.length-1;t>=0;--t)this.pop(i.APPEAR)},e.prototype.animate=function(t,e,r,n,o){var c=this;switch(r){case i.APPEAR:t?e.setScale(cc.Vec2.ONE):(this.returnPopup(e),this.PopupBackground.active=this.ShownPopups.children.length>0);break;case i.SCALE:e.setScale(t?cc.Vec2.ZERO:cc.Vec2.ONE),cc.tween(e).to(o,{scale:t?1:0},{easing:n}).call(function(){t||(c.returnPopup(e),c.PopupBackground.active=c.ShownPopups.children.length>0)}).start()}},e.prototype.usePopup=function(t){this.PopupContainer.removeChild(t,!1),this.ShownPopups.addChild(t)},e.prototype.returnPopup=function(t){this.ShownPopups.removeChild(t,!1),this.PopupContainer.addChild(t)},o([s(cc.Node)],e.prototype,"PopupBackground",void 0),o([s(cc.Node)],e.prototype,"PopupContainer",void 0),o([s(cc.Node)],e.prototype,"ShownPopups",void 0),e=o([u],e)}(c.default());r.default=f,cc._RF.pop()},{"../utils/SingletonNode":"SingletonNode"}],PopupShakeDice:[function(t,e,r){"use strict";cc._RF.push(e,"c6c64ooSHtNMIMa7Gjtdaks","PopupShakeDice");var n=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(c=(i<3?o(c):i>3?o(e,r,c):o(e,r))||c);return i>3&&c&&Object.defineProperty(e,r,c),c};Object.defineProperty(r,"__esModule",{value:!0});var i=t("./PopupMgr"),c=t("../ui/ButtonClickEvent"),a=t("../peer/PeerConnection"),u=t("../utils/State"),s=cc._decorator,f=s.ccclass,p=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnShake=null,e}return n(e,t),e.prototype.onLoad=function(){this.btnShake.registerEvent(this.onShake.bind(this))},e.prototype.onEnable=function(){this.btnShake.Interactive=!0},e.prototype.onShake=function(){i.default.Instance.pop(i.POPUP_EFFECT.APPEAR),a.default.Instance.sendTo({type:u.PeerPlayerState.PLAYING,data:{action:u.PlayerState.RESPONSE_SHAKE_DICE}})},o([p(c.default)],e.prototype,"btnShake",void 0),e=o([f],e)}(cc.Component);r.default=l,cc._RF.pop()},{"../peer/PeerConnection":"PeerConnection","../ui/ButtonClickEvent":"ButtonClickEvent","../utils/State":"State","./PopupMgr":"PopupMgr"}],SingletonNode:[function(t,e,r){"use strict";cc._RF.push(e,"c76e2cnQGhEUY6YdzVQAWr0","SingletonNode");var n=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),Object.defineProperty(e,"Instance",{get:function(){return this.instance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){if(e.instance)throw e.instance.constructor.name+" instance already exist";e.instance=this},e}(cc.Component)},cc._RF.pop()},{}],Singleton:[function(t,e,r){"use strict";cc._RF.push(e,"89d2bvx4zhOvof4scEe14gp","Singleton"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){return function(){function t(){if(t.instance)throw t.instance.constructor.name+" instance already exist";t.instance=this}return Object.defineProperty(t,"Instance",{get:function(){return this.instance},enumerable:!1,configurable:!0}),t}()},cc._RF.pop()},{}],Spinner:[function(t,e,r){"use strict";cc._RF.push(e,"71d31hwlvpNHb9Qv84ZXieh","Spinner");var n=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(c=(i<3?o(c):i>3?o(e,r,c):o(e,r))||c);return i>3&&c&&Object.defineProperty(e,r,c),c};Object.defineProperty(r,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,a=i.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.Speed=600,e}return n(e,t),e.prototype.update=function(t){this.node.angle=(this.node.angle-this.Speed*t)%360},o([a(cc.Integer)],e.prototype,"Speed",void 0),e=o([c],e)}(cc.Component);r.default=u,cc._RF.pop()},{}],StageMgr:[function(t,e,r){"use strict";cc._RF.push(e,"c5e4fU98b5LsZQwVVubfbVa","StageMgr");var n=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(c=(i<3?o(c):i>3?o(e,r,c):o(e,r))||c);return i>3&&c&&Object.defineProperty(e,r,c),c};Object.defineProperty(r,"__esModule",{value:!0});var i=t("../utils/SingletonNode"),c=t("../ui/LoadingCover"),a=t("../peer/PeerConnection"),u=t("./Home"),s=t("../ui/PlayerUI"),f=t("../utils/Timer"),p=t("../utils/State"),l=t("../popup/PopupMgr"),h=t("../utils/helper"),d=t("../game/GameDefine"),g=cc._decorator,y=g.ccclass,v=g.property,P=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.homeState=null,e.mState=-1,e.mTimerPingPong=new f.default,e.mTimerDisconnect=new f.default,e.mTimerConnection=new f.default,e}return n(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.mState=-1,this.mTimerPingPong.SetDuration(1),this.mTimerDisconnect.SetDuration(d.default.TIME_CHECK_DISCONNECT),this.mTimerConnection.SetDuration(10)},e.prototype.onEnable=function(){a.default.Instance&&(a.default.Instance.peer?0===a.default.Instance.sip?this.setState(p.PeerPlayerState.PEER_INIT):c.default.Instance.show():DEBUG?(c.default.Instance.show(),this.loadScript("https://peer.elofun.net/peerclient.js",this.initPeer.bind(this))):this.initPeer())},e.prototype.setState=function(t){if(this.mState!==t){this.mState=t;var e=p.PeerPlayerState.DISCONNECT,r=p.PeerPlayerState.PEER_INIT,n=p.PeerPlayerState.CONNECTING,o=p.PeerPlayerState.READY_TO_PLAY,i=p.PeerPlayerState.GAMEOVER;switch(this.mState){case e:s.default.Instance.setActiveProfile(!1),l.default.Instance.push("Popup Lost Connection",l.POPUP_EFFECT.APPEAR),s.default.Instance.setStatus("Disconenct"),c.default.Instance.hide(),h.default.log("controller sip="+a.default.Instance.sip+" Disconnect");break;case r:c.default.Instance.show(),s.default.Instance.setStatus("INIT");break;case n:c.default.Instance.show(),a.default.Instance.sendTo({type:n}),this.mTimerConnection.Reset(),s.default.Instance.setStatus("CONNECTING"),l.default.Instance.hideAll();break;case o:s.default.Instance.setActiveProfile(!0),c.default.Instance.hide(),s.default.Instance.setStatus("READY_TO_PLAY");break;case i:s.default.Instance.setStatus("Gameover"),l.default.Instance.hideAll()}}},e.prototype.update=function(t){var e=p.PeerPlayerState.PEER_INIT,r=p.PeerPlayerState.CONNECTING;switch(this.mState){case e:0!==a.default.Instance.sip&&this.setState(p.PeerPlayerState.CONNECTING);break;case r:this.mTimerConnection.Update(t),this.mTimerConnection.FirstFinished()&&this.setState(p.PeerPlayerState.DISCONNECT)}this.updatePingPong(t)},e.prototype.updatePingPong=function(t){this.mState<p.PeerPlayerState.READY_TO_PLAY||(this.mTimerPingPong.Update(t),this.mTimerPingPong.FirstFinished()&&(this.mTimerPingPong.Reset(),a.default.Instance.sendTo({type:p.PeerPlayerState.PING})),this.mTimerDisconnect.Update(t),this.mTimerDisconnect.FirstFinished()&&this.setState(p.PeerPlayerState.DISCONNECT))},e.prototype.initPeer=function(){window.getPeerClient&&(a.default.Instance.init(),a.default.Instance.peer.on("message",this.onMessage.bind(this)),this.setState(p.PeerPlayerState.PEER_INIT))},e.prototype.loadScript=function(t,e){var r=document.createElement("script");r.async=!0,r.src=t,r.addEventListener("load",function t(){document.body.removeChild(r),r.removeEventListener("load",t,!1),e&&e()},!1),document.body.appendChild(r)},e.prototype.onMessage=function(t,e){var r=p.PeerPlayerState.CONNECTING,n=p.PeerPlayerState.READY_TO_PLAY,o=p.PeerPlayerState.PLAYING,i=p.PeerPlayerState.GAMEOVER,c=JSON.parse(t);if(c){switch(this.printMessage(c,e),this.mState){case r:c.type==n&&(a.default.Instance.setTVPeer(e),s.default.Instance.initProfile(c.data.nick,c.data.color),this.setState(p.PeerPlayerState.READY_TO_PLAY));break;case n:c.type==o&&this.setState(o);break;case o:var u=c.data;c.type==o&&u&&s.default.Instance.updateAction(u),c.type==i&&(this.setState(i),s.default.Instance.updateAction(u));break;case i:c.type==n&&this.setState(n)}c.type==p.PeerPlayerState.PONG&&this.mTimerDisconnect.Reset()}},e.prototype.printMessage=function(t,e){var r=t.type,n=t.data||{};r!=p.PeerPlayerState.PING&&r!=p.PeerPlayerState.PONG&&(void 0!=n.action&&(n.action_name=p.PlayerState[n.action]),h.default.log("controller sip="+a.default.Instance.sip+" recieved from sip="+e.remoteSIP+" type="+r+":"+p.PeerPlayerState[r]+" nick="+n.nick+" msg="+JSON.stringify(n)))},e.prototype.onReconnect=function(){this.setState(p.PeerPlayerState.CONNECTING)},o([v(u.default)],e.prototype,"homeState",void 0),e=o([y],e)}(i.default());r.default=P,cc._RF.pop()},{"../game/GameDefine":"GameDefine","../peer/PeerConnection":"PeerConnection","../popup/PopupMgr":"PopupMgr","../ui/LoadingCover":"LoadingCover","../ui/PlayerUI":"PlayerUI","../utils/SingletonNode":"SingletonNode","../utils/State":"State","../utils/Timer":"Timer","../utils/helper":"helper","./Home":"Home"}],State:[function(t,e,r){"use strict";cc._RF.push(e,"a1d95S2KHFGyp14akqkaTtP","State"),Object.defineProperty(r,"__esModule",{value:!0}),r.PlayerState=r.GameState=r.PeerPlayerState=r.PeerGameState=void 0,r.PeerGameState=cc.Enum({PEER_INIT:0,WAIT_FOR_CONNECTION:1,READY_TO_PLAY:2,PLAYING:3,GAMEOVER:4}),r.PeerPlayerState=cc.Enum({DISCONNECT:0,PEER_INIT:1,CONNECTING:2,READY_TO_PLAY:3,PLAYING:4,GAMEOVER:5,PING:6,PONG:7}),r.GameState=cc.Enum({INIT:0,NEXT_PLAYER:1,PLAYING:2,TIMEOUT:3}),r.PlayerState=cc.Enum({INIT:0,WAITING:1,REQUEST_SHAKE_DICE:2,RESPONSE_SHAKE_DICE:3,MOVE_TO_TARGET:4,MOVE_COMPLETE:5,CRASH:6,WIN:7,LOSE:8}),cc._RF.pop()},{}],Timer:[function(t,e,r){"use strict";cc._RF.push(e,"46b464G3zBOu6Wr4RKM2giv","Timer"),Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function t(){this.timer=0,this.duration=0,this.overhead=0,this.isDone=!0}return t.prototype.SetDuration=function(t){this.timer=t,this.duration=t,this.overhead=0,this.isDone=!1},t.prototype.GetDuration=function(){return this.duration},t.prototype.GetTime=function(){return this.timer},t.prototype.GetPercent=function(){return this.timer/this.duration},t.prototype.Reset=function(){this.timer=this.duration,this.overhead=0,this.isDone=!1},t.prototype.IsDone=function(){return 0===this.timer},t.prototype.FirstFinished=function(){return!(this.timer>0)&&(!this.isDone&&(this.isDone=!0,!0))},t.prototype.GetOverhead=function(){return this.overhead},t.prototype.Update=function(t){0!==this.timer&&(this.timer-=t,this.timer<0&&(this.overhead=-this.timer,this.timer=0))},t}();r.default=n,cc._RF.pop()},{}],helper:[function(t,e,r){"use strict";cc._RF.push(e,"ae987Cg+vpBWIhrJQRlwwzk","helper"),Object.defineProperty(r,"__esModule",{value:!0}),r.default={log:function(t){DEBUG&&console.log(t)}},cc._RF.pop()},{}],qrcode:[function(t,e,r){"use strict";cc._RF.push(e,"580deMYQ1dHUJHya3VuxtbA","qrcode");var n=function(){var t=function(t,e){var r=t,n=i[e],o=null,c=0,a=null,u=[],s={},f=function(t,e){o=function(t){for(var e=new Array(t),r=0;r<t;r+=1){e[r]=new Array(t);for(var n=0;n<t;n+=1)e[r][n]=null}return e}(c=4*r+17),p(0,0),p(c-7,0),p(0,c-7),g(),h(),b(t,e),r>=7&&m(t),null==a&&(a=A(r,n,u)),O(a,e)},p=function(t,e){for(var r=-1;r<=7;r+=1)if(!(t+r<=-1||c<=t+r))for(var n=-1;n<=7;n+=1)e+n<=-1||c<=e+n||(o[t+r][e+n]=0<=r&&r<=6&&(0==n||6==n)||0<=n&&n<=6&&(0==r||6==r)||2<=r&&r<=4&&2<=n&&n<=4)},l=function(){for(var t=0,e=0,r=0;r<8;r+=1){f(!0,r);var n=d.getLostPoint(s);(0==r||t>n)&&(t=n,e=r)}return e},h=function(){for(var t=8;t<c-8;t+=1)null==o[t][6]&&(o[t][6]=t%2==0);for(var e=8;e<c-8;e+=1)null==o[6][e]&&(o[6][e]=e%2==0)},g=function(){for(var t=d.getPatternPosition(r),e=0;e<t.length;e+=1)for(var n=0;n<t.length;n+=1){var i=t[e],c=t[n];if(null==o[i][c])for(var a=-2;a<=2;a+=1)for(var u=-2;u<=2;u+=1)o[i+a][c+u]=-2==a||2==a||-2==u||2==u||0==a&&0==u}},m=function(t){for(var e=d.getBCHTypeNumber(r),n=0;n<18;n+=1){var i=!t&&1==(e>>n&1);o[Math.floor(n/3)][n%3+c-8-3]=i}for(n=0;n<18;n+=1){i=!t&&1==(e>>n&1);o[n%3+c-8-3][Math.floor(n/3)]=i}},b=function(t,e){for(var r=n<<3|e,i=d.getBCHTypeInfo(r),a=0;a<15;a+=1){var u=!t&&1==(i>>a&1);a<6?o[a][8]=u:a<8?o[a+1][8]=u:o[c-15+a][8]=u}for(a=0;a<15;a+=1){u=!t&&1==(i>>a&1);a<8?o[8][c-a-1]=u:a<9?o[8][15-a-1+1]=u:o[8][15-a-1]=u}o[c-8][8]=!t},O=function(t,e){for(var r=-1,n=c-1,i=7,a=0,u=d.getMaskFunction(e),s=c-1;s>0;s-=2)for(6==s&&(s-=1);;){for(var f=0;f<2;f+=1)if(null==o[n][s-f]){var p=!1;a<t.length&&(p=1==(t[a]>>>i&1)),u(n,s-f)&&(p=!p),o[n][s-f]=p,-1==(i-=1)&&(a+=1,i=7)}if((n+=r)<0||c<=n){n-=r,r=-r;break}}},I=function(t,e){for(var r=0,n=0,o=0,i=new Array(e.length),c=new Array(e.length),a=0;a<e.length;a+=1){var u=e[a].dataCount,s=e[a].totalCount-u;n=Math.max(n,u),o=Math.max(o,s),i[a]=new Array(u);for(var f=0;f<i[a].length;f+=1)i[a][f]=255&t.getBuffer()[f+r];r+=u;var p=d.getErrorCorrectPolynomial(s),l=y(i[a],p.getLength()-1).mod(p);c[a]=new Array(p.getLength()-1);for(f=0;f<c[a].length;f+=1){var h=f+l.getLength()-c[a].length;c[a][f]=h>=0?l.getAt(h):0}}var g=0;for(f=0;f<e.length;f+=1)g+=e[f].totalCount;var v=new Array(g),P=0;for(f=0;f<n;f+=1)for(a=0;a<e.length;a+=1)f<i[a].length&&(v[P]=i[a][f],P+=1);for(f=0;f<o;f+=1)for(a=0;a<e.length;a+=1)f<c[a].length&&(v[P]=c[a][f],P+=1);return v},A=function(t,e,r){for(var n=v.getRSBlocks(t,e),o=P(),i=0;i<r.length;i+=1){var c=r[i];o.put(c.getMode(),4),o.put(c.getLength(),d.getLengthInBits(c.getMode(),t)),c.write(o)}var a=0;for(i=0;i<n.length;i+=1)a+=n[i].dataCount;if(o.getLengthInBits()>8*a)throw"code length overflow. ("+o.getLengthInBits()+">"+8*a+")";for(o.getLengthInBits()+4<=8*a&&o.put(0,4);o.getLengthInBits()%8!=0;)o.putBit(!1);for(;!(o.getLengthInBits()>=8*a||(o.put(236,8),o.getLengthInBits()>=8*a));)o.put(17,8);return I(o,n)};s.addData=function(t,e){var r=null;switch(e=e||"Byte"){case"Numeric":r=_(t);break;case"Alphanumeric":r=S(t);break;case"Byte":r=C(t);break;case"Kanji":r=w(t);break;default:throw"mode:"+e}u.push(r),a=null},s.isDark=function(t,e){if(t<0||c<=t||e<0||c<=e)throw t+","+e;return o[t][e]},s.getModuleCount=function(){return c},s.make=function(){if(r<1){for(var t=1;t<40;t++){for(var e=v.getRSBlocks(t,n),o=P(),i=0;i<u.length;i++){var c=u[i];o.put(c.getMode(),4),o.put(c.getLength(),d.getLengthInBits(c.getMode(),t)),c.write(o)}var a=0;for(i=0;i<e.length;i++)a+=e[i].dataCount;if(o.getLengthInBits()<=8*a)break}r=t}f(!1,l())},s.createTableTag=function(t,e){t=t||2;var r="";r+='<table style="',r+=" border-width: 0px; border-style: none;",r+=" border-collapse: collapse;",r+=" padding: 0px; margin: "+(e=void 0===e?4*t:e)+"px;",r+='">',r+="<tbody>";for(var n=0;n<s.getModuleCount();n+=1){r+="<tr>";for(var o=0;o<s.getModuleCount();o+=1)r+='<td style="',r+=" border-width: 0px; border-style: none;",r+=" border-collapse: collapse;",r+=" padding: 0px; margin: 0px;",r+=" width: "+t+"px;",r+=" height: "+t+"px;",r+=" background-color: ",r+=s.isDark(n,o)?"#000000":"#ffffff",r+=";",r+='"/>';r+="</tr>"}return r+="</tbody>",r+="</table>"},s.createSvgTag=function(t,e,r,n){var o={};"object"==typeof arguments[0]&&(t=(o=arguments[0]).cellSize,e=o.margin,r=o.alt,n=o.title),t=t||2,e=void 0===e?4*t:e,(r="string"==typeof r?{text:r}:r||{}).text=r.text||null,r.id=r.text?r.id||"qrcode-description":null,(n="string"==typeof n?{text:n}:n||{}).text=n.text||null,n.id=n.text?n.id||"qrcode-title":null;var i,c,a,u,f=s.getModuleCount()*t+2*e,p="";for(u="l"+t+",0 0,"+t+" -"+t+",0 0,-"+t+"z ",p+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',p+=o.scalable?"":' width="'+f+'px" height="'+f+'px"',p+=' viewBox="0 0 '+f+" "+f+'" ',p+=' preserveAspectRatio="xMinYMin meet"',p+=n.text||r.text?' role="img" aria-labelledby="'+T([n.id,r.id].join(" ").trim())+'"':"",p+=">",p+=n.text?'<title id="'+T(n.id)+'">'+T(n.text)+"</title>":"",p+=r.text?'<description id="'+T(r.id)+'">'+T(r.text)+"</description>":"",p+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',p+='<path d="',c=0;c<s.getModuleCount();c+=1)for(a=c*t+e,i=0;i<s.getModuleCount();i+=1)s.isDark(c,i)&&(p+="M"+(i*t+e)+","+a+u);return p+='" stroke="transparent" fill="black"/>',p+="</svg>"},s.createDataURL=function(t,e){t=t||2,e=void 0===e?4*t:e;var r=s.getModuleCount()*t+2*e,n=e,o=r-e;return E(r,r,function(e,r){if(n<=e&&e<o&&n<=r&&r<o){var i=Math.floor((e-n)/t),c=Math.floor((r-n)/t);return s.isDark(c,i)?0:1}return 1})},s.createImgTag=function(t,e,r){t=t||2,e=void 0===e?4*t:e;var n=s.getModuleCount()*t+2*e,o="";return o+="<img",o+=' src="',o+=s.createDataURL(t,e),o+='"',o+=' width="',o+=n,o+='"',o+=' height="',o+=n,o+='"',r&&(o+=' alt="',o+=T(r),o+='"'),o+="/>"};var T=function(t){for(var e="",r=0;r<t.length;r+=1){var n=t.charAt(r);switch(n){case"<":e+="&lt;";break;case">":e+="&gt;";break;case"&":e+="&amp;";break;case'"':e+="&quot;";break;default:e+=n}}return e},R=function(t){t=void 0===t?2:t;var e,r,n,o,i,c=1*s.getModuleCount()+2*t,a=t,u=c-t,f={"\u2588\u2588":"\u2588","\u2588 ":"\u2580"," \u2588":"\u2584","  ":" "},p={"\u2588\u2588":"\u2580","\u2588 ":"\u2580"," \u2588":" ","  ":" "},l="";for(e=0;e<c;e+=2){for(n=Math.floor((e-a)/1),o=Math.floor((e+1-a)/1),r=0;r<c;r+=1)i="\u2588",a<=r&&r<u&&a<=e&&e<u&&s.isDark(n,Math.floor((r-a)/1))&&(i=" "),a<=r&&r<u&&a<=e+1&&e+1<u&&s.isDark(o,Math.floor((r-a)/1))?i+=" ":i+="\u2588",l+=t<1&&e+1>=u?p[i]:f[i];l+="\n"}return c%2&&t>0?l.substring(0,l.length-c-1)+Array(c+1).join("\u2580"):l.substring(0,l.length-1)};return s.createASCII=function(t,e){if((t=t||1)<2)return R(e);t-=1,e=void 0===e?2*t:e;var r,n,o,i,c=s.getModuleCount()*t+2*e,a=e,u=c-e,f=Array(t+1).join("\u2588\u2588"),p=Array(t+1).join("  "),l="",h="";for(r=0;r<c;r+=1){for(o=Math.floor((r-a)/t),h="",n=0;n<c;n+=1)i=1,a<=n&&n<u&&a<=r&&r<u&&s.isDark(o,Math.floor((n-a)/t))&&(i=0),h+=i?f:p;for(o=0;o<t;o+=1)l+=h+"\n"}return l.substring(0,l.length-1)},s.renderTo2dContext=function(t,e){e=e||2;for(var r=s.getModuleCount(),n=0;n<r;n++)for(var o=0;o<r;o++)t.fillStyle=s.isDark(n,o)?"black":"white",t.fillRect(n*e,o*e,e,e)},s};t.stringToBytes=(t.stringToBytesFuncs={default:function(t){for(var e=[],r=0;r<t.length;r+=1){var n=t.charCodeAt(r);e.push(255&n)}return e}}).default,t.createStringToBytes=function(t,e){var r=function(){for(var r=O(t),n=function(){var t=r.read();if(-1==t)throw"eof";return t},o=0,i={};;){var c=r.read();if(-1==c)break;var a=n(),u=n()<<8|n();i[String.fromCharCode(c<<8|a)]=u,o+=1}if(o!=e)throw o+" != "+e;return i}(),n="?".charCodeAt(0);return function(t){for(var e=[],o=0;o<t.length;o+=1){var i=t.charCodeAt(o);if(i<128)e.push(i);else{var c=r[t.charAt(o)];"number"==typeof c?(255&c)==c?e.push(c):(e.push(c>>>8),e.push(255&c)):e.push(n)}}return e}};var e=1,r=2,n=4,o=8,i={L:1,M:0,Q:3,H:2},c=0,a=1,u=2,s=3,f=4,p=5,l=6,h=7,d=function(){var t=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],i={},d=function(t){for(var e=0;0!=t;)e+=1,t>>>=1;return e};return i.getBCHTypeInfo=function(t){for(var e=t<<10;d(e)-d(1335)>=0;)e^=1335<<d(e)-d(1335);return 21522^(t<<10|e)},i.getBCHTypeNumber=function(t){for(var e=t<<12;d(e)-d(7973)>=0;)e^=7973<<d(e)-d(7973);return t<<12|e},i.getPatternPosition=function(e){return t[e-1]},i.getMaskFunction=function(t){switch(t){case c:return function(t,e){return(t+e)%2==0};case a:return function(t,e){return t%2==0};case u:return function(t,e){return e%3==0};case s:return function(t,e){return(t+e)%3==0};case f:return function(t,e){return(Math.floor(t/2)+Math.floor(e/3))%2==0};case p:return function(t,e){return t*e%2+t*e%3==0};case l:return function(t,e){return(t*e%2+t*e%3)%2==0};case h:return function(t,e){return(t*e%3+(t+e)%2)%2==0};default:throw"bad maskPattern:"+t}},i.getErrorCorrectPolynomial=function(t){for(var e=y([1],0),r=0;r<t;r+=1)e=e.multiply(y([1,g.gexp(r)],0));return e},i.getLengthInBits=function(t,i){if(1<=i&&i<10)switch(t){case e:return 10;case r:return 9;case n:case o:return 8;default:throw"mode:"+t}else if(i<27)switch(t){case e:return 12;case r:return 11;case n:return 16;case o:return 10;default:throw"mode:"+t}else{if(!(i<41))throw"type:"+i;switch(t){case e:return 14;case r:return 13;case n:return 16;case o:return 12;default:throw"mode:"+t}}},i.getLostPoint=function(t){for(var e=t.getModuleCount(),r=0,n=0;n<e;n+=1)for(var o=0;o<e;o+=1){for(var i=0,c=t.isDark(n,o),a=-1;a<=1;a+=1)if(!(n+a<0||e<=n+a))for(var u=-1;u<=1;u+=1)o+u<0||e<=o+u||0==a&&0==u||c==t.isDark(n+a,o+u)&&(i+=1);i>5&&(r+=3+i-5)}for(n=0;n<e-1;n+=1)for(o=0;o<e-1;o+=1){var s=0;t.isDark(n,o)&&(s+=1),t.isDark(n+1,o)&&(s+=1),t.isDark(n,o+1)&&(s+=1),t.isDark(n+1,o+1)&&(s+=1),0!=s&&4!=s||(r+=3)}for(n=0;n<e;n+=1)for(o=0;o<e-6;o+=1)t.isDark(n,o)&&!t.isDark(n,o+1)&&t.isDark(n,o+2)&&t.isDark(n,o+3)&&t.isDark(n,o+4)&&!t.isDark(n,o+5)&&t.isDark(n,o+6)&&(r+=40);for(o=0;o<e;o+=1)for(n=0;n<e-6;n+=1)t.isDark(n,o)&&!t.isDark(n+1,o)&&t.isDark(n+2,o)&&t.isDark(n+3,o)&&t.isDark(n+4,o)&&!t.isDark(n+5,o)&&t.isDark(n+6,o)&&(r+=40);var f=0;for(o=0;o<e;o+=1)for(n=0;n<e;n+=1)t.isDark(n,o)&&(f+=1);return r+=10*(Math.abs(100*f/e/e-50)/5)},i}(),g=function(){for(var t=new Array(256),e=new Array(256),r=0;r<8;r+=1)t[r]=1<<r;for(r=8;r<256;r+=1)t[r]=t[r-4]^t[r-5]^t[r-6]^t[r-8];for(r=0;r<255;r+=1)e[t[r]]=r;var n={glog:function(t){if(t<1)throw"glog("+t+")";return e[t]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return t[e]}};return n}();function y(t,e){if(void 0===t.length)throw t.length+"/"+e;var r=function(){for(var r=0;r<t.length&&0==t[r];)r+=1;for(var n=new Array(t.length-r+e),o=0;o<t.length-r;o+=1)n[o]=t[o+r];return n}(),n={getAt:function(t){return r[t]},getLength:function(){return r.length},multiply:function(t){for(var e=new Array(n.getLength()+t.getLength()-1),r=0;r<n.getLength();r+=1)for(var o=0;o<t.getLength();o+=1)e[r+o]^=g.gexp(g.glog(n.getAt(r))+g.glog(t.getAt(o)));return y(e,0)},mod:function(t){if(n.getLength()-t.getLength()<0)return n;for(var e=g.glog(n.getAt(0))-g.glog(t.getAt(0)),r=new Array(n.getLength()),o=0;o<n.getLength();o+=1)r[o]=n.getAt(o);for(o=0;o<t.getLength();o+=1)r[o]^=g.gexp(g.glog(t.getAt(o))+e);return y(r,0).mod(t)}};return n}var v=function(){var t=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],e=function(t,e){var r={};return r.totalCount=t,r.dataCount=e,r},r={},n=function(e,r){switch(r){case i.L:return t[4*(e-1)+0];case i.M:return t[4*(e-1)+1];case i.Q:return t[4*(e-1)+2];case i.H:return t[4*(e-1)+3];default:return}};return r.getRSBlocks=function(t,r){var o=n(t,r);if(void 0===o)throw"bad rs block @ typeNumber:"+t+"/errorCorrectionLevel:"+r;for(var i=o.length/3,c=[],a=0;a<i;a+=1)for(var u=o[3*a+0],s=o[3*a+1],f=o[3*a+2],p=0;p<u;p+=1)c.push(e(s,f));return c},r}(),P=function(){var t=[],e=0,r={getBuffer:function(){return t},getAt:function(e){var r=Math.floor(e/8);return 1==(t[r]>>>7-e%8&1)},put:function(t,e){for(var n=0;n<e;n+=1)r.putBit(1==(t>>>e-n-1&1))},getLengthInBits:function(){return e},putBit:function(r){var n=Math.floor(e/8);t.length<=n&&t.push(0),r&&(t[n]|=128>>>e%8),e+=1}};return r},_=function(t){var r=e,n=t,o={getMode:function(){return r},getLength:function(t){return n.length},write:function(t){for(var e=n,r=0;r+2<e.length;)t.put(i(e.substring(r,r+3)),10),r+=3;r<e.length&&(e.length-r==1?t.put(i(e.substring(r,r+1)),4):e.length-r==2&&t.put(i(e.substring(r,r+2)),7))}},i=function(t){for(var e=0,r=0;r<t.length;r+=1)e=10*e+c(t.charAt(r));return e},c=function(t){if("0"<=t&&t<="9")return t.charCodeAt(0)-"0".charCodeAt(0);throw"illegal char :"+t};return o},S=function(t){var e=r,n=t,o={getMode:function(){return e},getLength:function(t){return n.length},write:function(t){for(var e=n,r=0;r+1<e.length;)t.put(45*i(e.charAt(r))+i(e.charAt(r+1)),11),r+=2;r<e.length&&t.put(i(e.charAt(r)),6)}},i=function(t){if("0"<=t&&t<="9")return t.charCodeAt(0)-"0".charCodeAt(0);if("A"<=t&&t<="Z")return t.charCodeAt(0)-"A".charCodeAt(0)+10;switch(t){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+t}};return o},C=function(e){var r=n,o=t.stringToBytes(e),i={getMode:function(){return r},getLength:function(t){return o.length},write:function(t){for(var e=0;e<o.length;e+=1)t.put(o[e],8)}};return i},w=function(e){var r=o,n=t.stringToBytesFuncs.SJIS;if(!n)throw"sjis not supported.";!function(t,e){var r=n("\u53cb");if(2!=r.length||38726!=(r[0]<<8|r[1]))throw"sjis not supported."}();var i=n(e),c={getMode:function(){return r},getLength:function(t){return~~(i.length/2)},write:function(t){for(var e=i,r=0;r+1<e.length;){var n=(255&e[r])<<8|255&e[r+1];if(33088<=n&&n<=40956)n-=33088;else{if(!(57408<=n&&n<=60351))throw"illegal char at "+(r+1)+"/"+n;n-=49472}n=192*(n>>>8&255)+(255&n),t.put(n,13),r+=2}if(r<e.length)throw"illegal char at "+(r+1)}};return c},m=function(){var t=[],e={writeByte:function(e){t.push(255&e)},writeShort:function(t){e.writeByte(t),e.writeByte(t>>>8)},writeBytes:function(t,r,n){r=r||0,n=n||t.length;for(var o=0;o<n;o+=1)e.writeByte(t[o+r])},writeString:function(t){for(var r=0;r<t.length;r+=1)e.writeByte(t.charCodeAt(r))},toByteArray:function(){return t},toString:function(){var e="";e+="[";for(var r=0;r<t.length;r+=1)r>0&&(e+=","),e+=t[r];return e+="]"}};return e},b=function(){var t=0,e=0,r=0,n="",o={},i=function(t){n+=String.fromCharCode(c(63&t))},c=function(t){if(t<0);else{if(t<26)return 65+t;if(t<52)return t-26+97;if(t<62)return t-52+48;if(62==t)return 43;if(63==t)return 47}throw"n:"+t};return o.writeByte=function(n){for(t=t<<8|255&n,e+=8,r+=1;e>=6;)i(t>>>e-6),e-=6},o.flush=function(){if(e>0&&(i(t<<6-e),t=0,e=0),r%3!=0)for(var o=3-r%3,c=0;c<o;c+=1)n+="="},o.toString=function(){return n},o},O=function(t){var e=t,r=0,n=0,o=0,i={read:function(){for(;o<8;){if(r>=e.length){if(0==o)return-1;throw"unexpected end of file./"+o}var t=e.charAt(r);if(r+=1,"="==t)return o=0,-1;t.match(/^\s$/)||(n=n<<6|c(t.charCodeAt(0)),o+=6)}var i=n>>>o-8&255;return o-=8,i}},c=function(t){if(65<=t&&t<=90)return t-65;if(97<=t&&t<=122)return t-97+26;if(48<=t&&t<=57)return t-48+52;if(43==t)return 62;if(47==t)return 63;throw"c:"+t};return i},I=function(t,e){var r=t,n=e,o=new Array(t*e),i={setPixel:function(t,e,n){o[e*r+t]=n},write:function(t){t.writeString("GIF87a"),t.writeShort(r),t.writeShort(n),t.writeByte(128),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(255),t.writeByte(255),t.writeByte(255),t.writeString(","),t.writeShort(0),t.writeShort(0),t.writeShort(r),t.writeShort(n),t.writeByte(0);var e=a(2);t.writeByte(2);for(var o=0;e.length-o>255;)t.writeByte(255),t.writeBytes(e,o,255),o+=255;t.writeByte(e.length-o),t.writeBytes(e,o,e.length-o),t.writeByte(0),t.writeString(";")}},c=function(t){var e=t,r=0,n=0,o={write:function(t,o){if(t>>>o!=0)throw"length over";for(;r+o>=8;)e.writeByte(255&(t<<r|n)),o-=8-r,t>>>=8-r,n=0,r=0;n|=t<<r,r+=o},flush:function(){r>0&&e.writeByte(n)}};return o},a=function(t){for(var e=1<<t,r=1+(1<<t),n=t+1,i=u(),a=0;a<e;a+=1)i.add(String.fromCharCode(a));i.add(String.fromCharCode(e)),i.add(String.fromCharCode(r));var s=m(),f=c(s);f.write(e,n);var p=0,l=String.fromCharCode(o[p]);for(p+=1;p<o.length;){var h=String.fromCharCode(o[p]);p+=1,i.contains(l+h)?l+=h:(f.write(i.indexOf(l),n),i.size()<4095&&(i.size()==1<<n&&(n+=1),i.add(l+h)),l=h)}return f.write(i.indexOf(l),n),f.write(r,n),f.flush(),s.toByteArray()},u=function(){var t={},e=0,r={add:function(n){if(r.contains(n))throw"dup key:"+n;t[n]=e,e+=1},size:function(){return e},indexOf:function(e){return t[e]},contains:function(e){return void 0!==t[e]}};return r};return i},E=function(t,e,r){for(var n=I(t,e),o=0;o<e;o+=1)for(var i=0;i<t;i+=1)n.setPixel(i,o,r(i,o));var c=m();n.write(c);for(var a=b(),u=c.toByteArray(),s=0;s<u.length;s+=1)a.writeByte(u[s]);return a.flush(),"data:image/gif;base64,"+a};return t}();n.stringToBytesFuncs["UTF-8"]=function(t){return function(t){for(var e=[],r=0;r<t.length;r++){var n=t.charCodeAt(r);n<128?e.push(n):n<2048?e.push(192|n>>6,128|63&n):n<55296||n>=57344?e.push(224|n>>12,128|n>>6&63,128|63&n):(r++,n=65536+((1023&n)<<10|1023&t.charCodeAt(r)),e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|63&n))}return e}(t)},function(t){"function"==typeof define&&define.amd?define([],t):"object"==typeof r&&(e.exports=t())}(function(){return n}),cc._RF.pop()},{}]},{},["GameDefine","qrcode","PeerConnection","PopupLostConnection","PopupMgr","PopupShakeDice","Home","StageMgr","ButtonClickEvent","LoadingCover","PlayerUI","CancelUnderTouch","Singleton","SingletonNode","Spinner","State","Timer","helper"]);