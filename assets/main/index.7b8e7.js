window.__require=function t(e,r,n){function o(a,c){if(!r[a]){if(!e[a]){var u=a.split("/");if(u=u[u.length-1],!e[u]){var s="function"==typeof __require&&__require;if(!c&&s)return s(u,!0);if(i)return i(u,!0);throw new Error("Cannot find module '"+a+"'")}a=u}var p=r[a]={exports:{}};e[a][0].call(p.exports,function(t){return o(e[a][1][t]||t)},p,p.exports,t,e,r,n)}return r[a].exports}for(var i="function"==typeof __require&&__require,a=0;a<n.length;a++)o(n[a]);return o}({ButtonClickEvent:[function(t,e,r){"use strict";cc._RF.push(e,"4585f2oT4FM87zy3pXHhtST","ButtonClickEvent");var n=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,c=i.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ClickInterval=.5,e.activeBgColor=cc.Color.BLUE,e.activeTextColor=cc.Color.WHITE,e.deactiveBgColor=cc.Color.GRAY,e.deactiveTextColor=cc.Color.BLACK,e}return n(e,t),Object.defineProperty(e.prototype,"Interactive",{get:function(){return this.mInteractive},set:function(t){this.mInteractive=t,this.mInteractive?(this.bg.color=this.activeBgColor,this.text.color=this.activeTextColor):(this.bg.color=this.deactiveBgColor,this.text.color=this.deactiveTextColor)},enumerable:!1,configurable:!0}),e.prototype.registerEvent=function(t){var e=this;this.node.on(cc.Node.EventType.TOUCH_END,function(){e.onClick(t)})},e.prototype.onEnable=function(){this.mInteractive=!0,this.mTimer=this.ClickInterval},e.prototype.update=function(t){-1!=this.ClickInterval&&(this.mInteractive||(this.mTimer-=t,this.mTimer<0&&(this.mInteractive=!0,this.mTimer=this.ClickInterval)))},e.prototype.onClick=function(t){this.mInteractive&&(this.mInteractive=!1,t())},o([c(cc.Float)],e.prototype,"ClickInterval",void 0),o([c(cc.Node)],e.prototype,"bg",void 0),o([c(cc.Node)],e.prototype,"text",void 0),o([c(cc.Color)],e.prototype,"activeBgColor",void 0),o([c(cc.Color)],e.prototype,"activeTextColor",void 0),o([c(cc.Color)],e.prototype,"deactiveBgColor",void 0),o([c(cc.Color)],e.prototype,"deactiveTextColor",void 0),e=o([a],e)}(cc.Component);r.default=u,cc._RF.pop()},{}],CancelUnderTouch:[function(t,e,r){"use strict";cc._RF.push(e,"2ec87SVD/NEM5jDixtpR20Q","CancelUnderTouch");var n=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,c=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_START,function(){},this)},e=o([a],e)}(cc.Component));r.default=c,cc._RF.pop()},{}],DiceMgr:[function(t,e,r){"use strict";cc._RF.push(e,"f02b8zfziBBEJyZucDIO7Rc","DiceMgr");var n=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=t("../utils/SingletonNode"),a=t("../utils/helper"),c=cc._decorator,u=c.ccclass,s=c.property,p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this)},e.prototype.onEnable=function(){},e.prototype.show=function(){this.node.active=!0,this.dice.active=!0,this.number.node.active=!1},e.prototype.shake=function(){return this.dice.active=!1,this.number.node.active=!0,this.number.string=a.default.RandInt(1,6).toString(),parseInt(this.number.string)},o([s(cc.Node)],e.prototype,"dice",void 0),o([s(cc.Label)],e.prototype,"number",void 0),e=o([u],e)}(i.default());r.default=p,cc._RF.pop()},{"../utils/SingletonNode":"SingletonNode","../utils/helper":"helper"}],GameDefine:[function(t,e,r){"use strict";cc._RF.push(e,"28465pyFjpHEpgb5bQaJzhU","GameDefine"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=new(function(){return function(){this.TIME_GAME_PLAY=60,this.TIME_CHECK_DISCONNECT=3}}()),cc._RF.pop()},{}],LoadingCover:[function(t,e,r){"use strict";cc._RF.push(e,"f0006x5yvJNraLWMEsasTtY","LoadingCover");var n=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=t("../utils/SingletonNode"),a=cc._decorator,c=a.ccclass,u=a.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.Container=null,e}return n(e,t),e.prototype.show=function(){this.Container.active=!0},e.prototype.hide=function(){this.Container.active=!1},o([u(cc.Node)],e.prototype,"Container",void 0),e=o([c],e)}(i.default());r.default=s,cc._RF.pop()},{"../utils/SingletonNode":"SingletonNode"}],Location:[function(t,e,r){"use strict";cc._RF.push(e,"2e078ys9fJDM6eeS93e0s5H","Location"),Object.defineProperty(r,"__esModule",{value:!0});var n=function(){return function(){}}();r.default=n,cc._RF.pop()},{}],MapMgr:[function(t,e,r){"use strict";cc._RF.push(e,"6a795x8HJBGOKFGyvwkO5rg","MapMgr");var n=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=t("../utils/SingletonNode"),a=t("./StopOver"),c=t("../utils/Point"),u=cc._decorator,s=u.ccclass,p=(u.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mapWidth=1030,e.mapHeight=580,e.bottomStopOver=new a.default,e.leftStopOver=new a.default,e.topStopOver=new a.default,e.rightStopOver=new a.default,e.points=[],e.distance=7,e}return n(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.bottomStopOver.point.x=0,this.bottomStopOver.point.y=-this.mapHeight/2,this.leftStopOver.point.x=-this.mapWidth/2,this.leftStopOver.point.y=0,this.topStopOver.point.x=0,this.topStopOver.point.y=this.mapHeight/2,this.rightStopOver.point.x=this.mapWidth/2,this.rightStopOver.point.y=0,this.makePoints(this.bottomStopOver.point,this.leftStopOver.point),this.makePoints(this.leftStopOver.point,this.topStopOver.point),this.makePoints(this.topStopOver.point,this.rightStopOver.point),this.makePoints(this.rightStopOver.point,this.bottomStopOver.point)},e.prototype.onEnable=function(){},e.prototype.makePoints=function(t,e){for(var r=t.x,n=t.y,o=this.distance+1,i=(e.x-t.x)/o,a=(e.y-t.y)/o,u=0;u<=o;++u)this.points.push(new c.default(r+u*i,n+u*a))},e.prototype.getPoints=function(){return this.points},e=o([s],e)}(i.default()));r.default=p,cc._RF.pop()},{"../utils/Point":"Point","../utils/SingletonNode":"SingletonNode","./StopOver":"StopOver"}],PeerConnection:[function(t,e,r){"use strict";cc._RF.push(e,"cf4fbOYPalCOYilukTfmADj","PeerConnection");var n=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=t("../utils/SingletonNode"),a=cc._decorator,c=a.ccclass,u=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.peer=null,e.sip=0,e}return n(e,t),e.prototype.start=function(){},e.prototype.update=function(t){this.peer&&!this.sip&&(this.sip=this.peer.getSIP(),console.log("tv sip",this.sip))},e.prototype.init=function(){this.peer=window.getPeerClient()},e=o([c],e)}(i.default()));r.default=u,cc._RF.pop()},{"../utils/SingletonNode":"SingletonNode"}],PlayerMgr:[function(t,e,r){"use strict";cc._RF.push(e,"07dfaotn8hMAIwpmulw3FjJ","PlayerMgr");var n=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=t("../utils/SingletonNode"),a=t("./Player"),c=cc._decorator,u=c.ccclass,s=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.players=[],e}return n(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this)},e.prototype.onEnable=function(){},o([s(a.default)],e.prototype,"players",void 0),e=o([u],e)}(i.default());r.default=p,cc._RF.pop()},{"../utils/SingletonNode":"SingletonNode","./Player":"Player"}],PlayerUIMgr:[function(t,e,r){"use strict";cc._RF.push(e,"3fe46KBPZ9Idr1LIwyoO2vs","PlayerUIMgr");var n=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=t("../utils/SingletonNode"),a=t("./PlayerUI"),c=cc._decorator,u=c.ccclass,s=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.players=[],e}return n(e,t),e.prototype.getNumberPlayerReady=function(){return this.players.filter(function(t){return null!=t.isReadyToPlay()}).length},e.prototype.getFreePlayer=function(){for(var t=0;t<this.players.length;++t)if(!this.players[t].isConnected())return this.players[t];return null},e.prototype.updatePingPong=function(t){for(var e=0;e<this.players.length;++e)this.players[e].updatePingPong(t)},e.prototype.receivedAction=function(t,e){for(var r=0;r<this.players.length;++r)this.players[r].Controller&&this.players[r].Controller.remoteSIP===t.remoteSIP&&this.players[r].receivedAction(t,e)},e.prototype.resetTimerDisconnect=function(t){for(var e=0;e<this.players.length;++e)this.players[e].Controller&&this.players[e].Controller.remoteSIP===t.remoteSIP&&this.players[e].resetTimerDisconnect(t)},o([s(a.default)],e.prototype,"players",void 0),e=o([u],e)}(i.default());r.default=p,cc._RF.pop()},{"../utils/SingletonNode":"SingletonNode","./PlayerUI":"PlayerUI"}],PlayerUI:[function(t,e,r){"use strict";cc._RF.push(e,"c4f95ul0DVFHoKvEZddfYKb","PlayerUI");var n=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=t("../utils/State"),a=t("../utils/Timer"),c=t("../utils/helper"),u=t("../peer/PeerConnection"),s=t("../game/GameDefine"),p=cc._decorator,l=p.ccclass,f=p.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.title=null,e.status=null,e.nick=null,e.color=null,e.index=0,e.nickProfile="",e.colorProfile=cc.Color.WHITE,e.mController=null,e.mState=-1,e.mTimerDisconnect=new a.default,e.mReceivedActionCB=null,e}return n(e,t),Object.defineProperty(e.prototype,"Controller",{get:function(){return this.mController},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.title.string="PLAYER "+this.index+" :",this.nick.string=this.nickProfile,this.color.color=this.colorProfile,this.mTimerDisconnect.SetDuration(s.default.TIME_CHECK_DISCONNECT)},e.prototype.onEnable=function(){this.isConnected()?this.setState(i.PeerPlayerState.READY_TO_PLAY):this.setActiveProfile(!1)},e.prototype.start=function(){},e.prototype.myUpdate=function(t){},e.prototype.updatePingPong=function(t){this.mState<i.PeerPlayerState.READY_TO_PLAY||(this.mTimerDisconnect.Update(t),this.mTimerDisconnect.FirstFinished()&&this.setState(i.PeerPlayerState.DISCONNECT))},e.prototype.setActiveProfile=function(t){void 0===t&&(t=!0),this.status.string=t?"Ready":"Waiting",this.nick.string=this.nickProfile,this.nick.node.active=t,this.color.active=t},e.prototype.setState=function(t,e){if(this.mState!==t){this.mState=t;var r=i.PeerPlayerState.DISCONNECT,n=i.PeerPlayerState.READY_TO_PLAY,o=i.PeerPlayerState.PLAYING;switch(this.mState){case n:this.setActiveProfile(!0),this.sendTo({type:n,data:e});break;case r:this.mController=null,this.setActiveProfile(!1),this.sendTo({type:r});break;case o:this.sendTo({type:o})}}},e.prototype.isConnected=function(){return this.mController&&this.mState>=i.PeerPlayerState.READY_TO_PLAY},e.prototype.isDisconnect=function(){return this.mState==i.PeerPlayerState.DISCONNECT},e.prototype.isReadyToPlay=function(){return this.mController&&this.mState==i.PeerPlayerState.READY_TO_PLAY},e.prototype.readyToPlay=function(t,e){this.mController=t,this.setState(i.PeerPlayerState.READY_TO_PLAY,e)},e.prototype.play=function(){this.setState(i.PeerPlayerState.PLAYING,null)},e.prototype.resetTimerDisconnect=function(t){t&&this.mController&&this.mState!=i.PeerPlayerState.DISCONNECT&&t.remoteSIP===this.mController.remoteSIP&&(this.mTimerDisconnect.Reset(),this.sendTo({type:i.PeerPlayerState.PONG}))},e.prototype.setReceivedActionCB=function(t){this.mReceivedActionCB=t},e.prototype.sendTo=function(t){if(this.mController){t.data=t.data||{};var e=t.type,r=t.data;!r.nick&&this.nickProfile&&(r.nick=this.nickProfile),this.mController.send(JSON.stringify(t)),t.type!=i.PeerPlayerState.PING&&t.type!=i.PeerPlayerState.PONG&&(void 0!=r.action&&(r.action=i.PlayerState[r.action]),c.default.log("tv sip="+u.default.Instance.sip+" sendTo sip="+this.mController.remoteSIP+" type="+e+":"+i.PeerPlayerState[e]+" nick="+r.nick+" msg="+JSON.stringify(r)))}},e.prototype.sendAction=function(t){this.mController&&(this.sendTo({type:i.PeerPlayerState.PLAYING,data:t}),t.action==i.PlayerState.CRASH&&(this.nick.string="CASH"))},e.prototype.receivedAction=function(t,e){t&&this.mController&&this.mState!=i.PeerPlayerState.DISCONNECT&&this.mReceivedActionCB&&this.mReceivedActionCB(e)},e.prototype.gameover=function(t){this.sendTo({type:i.PeerPlayerState.GAMEOVER,data:t})},o([f(cc.Label)],e.prototype,"title",void 0),o([f(cc.Label)],e.prototype,"status",void 0),o([f(cc.Label)],e.prototype,"nick",void 0),o([f(cc.Node)],e.prototype,"color",void 0),o([f],e.prototype,"index",void 0),o([f],e.prototype,"nickProfile",void 0),o([f],e.prototype,"colorProfile",void 0),e=o([l],e)}(cc.Component);r.default=h,cc._RF.pop()},{"../game/GameDefine":"GameDefine","../peer/PeerConnection":"PeerConnection","../utils/State":"State","../utils/Timer":"Timer","../utils/helper":"helper"}],Player:[function(t,e,r){"use strict";cc._RF.push(e,"e00a3cxr+5GEq+AWc7LitWy","Player");var n=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=t("../utils/State"),a=t("../game/MapMgr"),c=t("../game/DiceMgr"),u=cc._decorator,s=u.ccclass,p=u.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mState=-1,e.mCurrentIndex=-1,e}return n(e,t),Object.defineProperty(e.prototype,"PUI",{get:function(){return this.mPUI},set:function(t){this.mPUI=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"State",{get:function(){return this.mState},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){},e.prototype.onEnable=function(){},e.prototype.onReceivedAction=function(t){var e=i.PlayerState.RESPONSE_SHAKE_DICE;switch(t.action){case e:this.setState(e)}},e.prototype.setState=function(t){if(this.mState!=t){this.mState=t;var e=i.PlayerState.INIT,r=i.PlayerState.WAITING,n=i.PlayerState.REQUEST_SHAKE_DICE,o=i.PlayerState.RESPONSE_SHAKE_DICE,u=i.PlayerState.MOVE_TO_TARGET,s=i.PlayerState.MOVE_COMPLETE,p=i.PlayerState.CRASH,l=i.PlayerState.WIN;switch(this.mState){case e:this.PUI.sendAction({action:e}),this.nick.string=this.PUI.nickProfile,this.color.color=this.PUI.colorProfile,this.mPoints=a.default.Instance.getPoints(),this.mCurrentIndex=0;var f=this.mPoints[this.mCurrentIndex];this.setPos(f.x,f.y);break;case r:this.PUI.sendAction({action:r});break;case n:this.PUI.sendAction({action:n}),c.default.Instance.show();break;case o:this.mDiceNumber=c.default.Instance.shake();for(var h=[],d=1;d<=this.mDiceNumber;++d)this.mCurrentIndex++,this.mCurrentIndex>=this.mPoints.length&&(this.mCurrentIndex=0),h.push(cc.moveTo(.2,this.mPoints[this.mCurrentIndex].x,this.mPoints[this.mCurrentIndex].y));h.push(cc.callFunc(this.moveComplete.bind(this))),this.node.runAction(cc.sequence(h)),this.setState(u);break;case u:this.PUI.sendAction({action:u});break;case s:this.PUI.sendAction({action:s});break;case p:this.PUI.sendAction({action:p});break;case l:this.PUI.sendAction({action:l})}}},e.prototype.waiting=function(){this.setState(i.PlayerState.WAITING)},e.prototype.requestShakeDice=function(){this.setState(i.PlayerState.REQUEST_SHAKE_DICE)},e.prototype.moveComplete=function(){this.setState(i.PlayerState.MOVE_COMPLETE)},e.prototype.win=function(){this.setState(i.PlayerState.WIN)},e.prototype.cash=function(){this.setState(i.PlayerState.CRASH)},e.prototype.isMoveComplete=function(){return this.mState==i.PlayerState.MOVE_COMPLETE},e.prototype.setPlayerUI=function(t){this.PUI=t,this.node.active=!!t,t&&t.setReceivedActionCB(this.onReceivedAction.bind(this))},e.prototype.init=function(){this.setState(i.PlayerState.INIT)},e.prototype.setPos=function(t,e){this.node.x=t,this.node.y=e},e.prototype.myUpdate=function(t){},e.prototype.canContinue=function(){return this.mState!=i.PlayerState.CRASH&&this.mState!=i.PlayerState.WIN&&this.mState!=i.PlayerState.LOSE},o([p(cc.Label)],e.prototype,"nick",void 0),o([p(cc.Node)],e.prototype,"color",void 0),e=o([s],e)}(cc.Component);r.default=l,cc._RF.pop()},{"../game/DiceMgr":"DiceMgr","../game/MapMgr":"MapMgr","../utils/State":"State"}],Point:[function(t,e,r){"use strict";cc._RF.push(e,"ea3d591gf9OjYQOHXQaoX9V","Point"),Object.defineProperty(r,"__esModule",{value:!0});var n=function(){return function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}}();r.default=n,cc._RF.pop()},{}],PopupGameOver:[function(t,e,r){"use strict";cc._RF.push(e,"0f87bipEelCnZ/ckrLc6XLG","PopupGameOver");var n=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=t("./PopupMgr"),a=t("../ui/ButtonClickEvent"),c=t("../stages/StageMgr"),u=cc._decorator,s=u.ccclass,p=u.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnHome=null,e.btnReplay=null,e}return n(e,t),e.prototype.onLoad=function(){this.btnHome.registerEvent(this.onHome.bind(this)),this.btnReplay.registerEvent(this.onReplay.bind(this))},e.prototype.onEnable=function(){this.btnHome.Interactive=!0},e.prototype.onHome=function(){i.default.Instance.pop(i.POPUP_EFFECT.APPEAR),c.default.Instance.gameState.Players.forEach(function(t){t.PUI.readyToPlay(t.PUI.Controller)}),setTimeout(function(){c.default.Instance.show("Home"),c.default.Instance.waitForConnection()},200)},e.prototype.onReplay=function(){i.default.Instance.pop(i.POPUP_EFFECT.APPEAR),c.default.Instance.gameState.Players.forEach(function(t){t.PUI.readyToPlay(t.PUI.Controller)}),setTimeout(function(){c.default.Instance.play()},200)},o([p(a.default)],e.prototype,"btnHome",void 0),o([p(a.default)],e.prototype,"btnReplay",void 0),e=o([s],e)}(cc.Component);r.default=l,cc._RF.pop()},{"../stages/StageMgr":"StageMgr","../ui/ButtonClickEvent":"ButtonClickEvent","./PopupMgr":"PopupMgr"}],PopupMgr:[function(t,e,r){"use strict";cc._RF.push(e,"55b69Pl4UBFs4ejkN/XK7Ay","PopupMgr");var n=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};Object.defineProperty(r,"__esModule",{value:!0}),r.POPUP_EFFECT=void 0;var i,a=t("../utils/SingletonNode"),c=cc._decorator,u=c.ccclass,s=c.property;(function(t){t[t.APPEAR=0]="APPEAR",t[t.SCALE=1]="SCALE"})(i=r.POPUP_EFFECT||(r.POPUP_EFFECT={}));var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.PopupBackground=null,e.PopupContainer=null,e.ShownPopups=null,e}return n(e,t),e.prototype.start=function(){this.PopupBackground.active=!1,this.PopupContainer.active=!1;for(var t=0,e=this.PopupContainer.children;t<e.length;t++){e[t].active=!0}},e.prototype.push=function(t,e,r,n){void 0===e&&(e=i.SCALE),void 0===r&&(r="smooth"),void 0===n&&(n=.5);var o=this.PopupContainer.getChildByName(t);o&&(this.usePopup(o),this.animate(!0,o,e,r,n),this.PopupBackground.active=!0)},e.prototype.pop=function(t,e,r){if(void 0===t&&(t=i.SCALE),void 0===e&&(e="smooth"),void 0===r&&(r=.5),this.ShownPopups.children.length>0){var n=this.ShownPopups.children[this.ShownPopups.children.length-1];this.animate(!1,n,t,e,r)}},e.prototype.hide=function(t,e,r,n){void 0===e&&(e=i.SCALE),void 0===r&&(r="smooth"),void 0===n&&(n=.5);var o=this.ShownPopups.getChildByName(t);o&&this.animate(!1,o,e,r,n)},e.prototype.animate=function(t,e,r,n,o){var a=this;switch(r){case i.APPEAR:t?e.setScale(cc.Vec2.ONE):(this.returnPopup(e),this.PopupBackground.active=this.ShownPopups.children.length>0);break;case i.SCALE:e.setScale(t?cc.Vec2.ZERO:cc.Vec2.ONE),cc.tween(e).to(o,{scale:t?1:0},{easing:n}).call(function(){t||(a.returnPopup(e),a.PopupBackground.active=a.ShownPopups.children.length>0)}).start()}},e.prototype.usePopup=function(t){this.PopupContainer.removeChild(t,!1),this.ShownPopups.addChild(t)},e.prototype.returnPopup=function(t){this.ShownPopups.removeChild(t,!1),this.PopupContainer.addChild(t)},o([s(cc.Node)],e.prototype,"PopupBackground",void 0),o([s(cc.Node)],e.prototype,"PopupContainer",void 0),o([s(cc.Node)],e.prototype,"ShownPopups",void 0),e=o([u],e)}(a.default());r.default=p,cc._RF.pop()},{"../utils/SingletonNode":"SingletonNode"}],SingletonNode:[function(t,e,r){"use strict";cc._RF.push(e,"c76e2cnQGhEUY6YdzVQAWr0","SingletonNode");var n=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),Object.defineProperty(e,"Instance",{get:function(){return this.instance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){if(e.instance)throw e.instance.constructor.name+" instance already exist";e.instance=this},e}(cc.Component)},cc._RF.pop()},{}],Singleton:[function(t,e,r){"use strict";cc._RF.push(e,"89d2bvx4zhOvof4scEe14gp","Singleton"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){return function(){function t(){if(t.instance)throw t.instance.constructor.name+" instance already exist";t.instance=this}return Object.defineProperty(t,"Instance",{get:function(){return this.instance},enumerable:!1,configurable:!0}),t}()},cc._RF.pop()},{}],Spinner:[function(t,e,r){"use strict";cc._RF.push(e,"71d31hwlvpNHb9Qv84ZXieh","Spinner");var n=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,c=i.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.Speed=600,e}return n(e,t),e.prototype.update=function(t){this.node.angle=(this.node.angle-this.Speed*t)%360},o([c(cc.Integer)],e.prototype,"Speed",void 0),e=o([a],e)}(cc.Component);r.default=u,cc._RF.pop()},{}],StageHome:[function(t,e,r){"use strict";cc._RF.push(e,"9952aOjhLlO36pVQgCklJUH","StageHome");var n=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=t("../lib/qrcode"),a=t("../ui/PlayerUIMgr"),c=t("../ui/ButtonClickEvent"),u=t("../peer/PeerConnection"),s=t("../stages/Stage"),p=t("./StageMgr"),l=cc._decorator,f=l.ccclass,h=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.playerUIMgr=null,e.playButton=null,e.sip=null,e.qrSprite=null,e}return n(e,t),e.prototype.onLoad=function(){this.playButton.registerEvent(this.onClickPlayButton.bind(this))},e.prototype.onEnable=function(){},e.prototype.start=function(){this.playButton.Interactive=!1},e.prototype.myUpdate=function(t){this.playButton.Interactive=this.playerUIMgr.getNumberPlayerReady()>=1},e.prototype.onClickPlayButton=function(){p.default.Instance.play()},e.prototype.initSIP=function(){this.sip.string=u.default.Instance.sip+"";var t=i(10,"M");t.addData(unescape(encodeURI("https://uno22.github.io/monopoly/controller?sip="+this.sip.string))),t.make();var e=new Image;e.src=t.createDataURL(4),e.onload=function(){var t=new cc.Texture2D;t.initWithElement(e),t.handleLoadedTexture();var r=new cc.SpriteFrame(t);this.qrSprite.spriteFrame=r}.bind(this)},o([h(a.default)],e.prototype,"playerUIMgr",void 0),o([h(c.default)],e.prototype,"playButton",void 0),o([h(cc.Label)],e.prototype,"sip",void 0),o([h(cc.Sprite)],e.prototype,"qrSprite",void 0),e=o([f],e)}(s.default);r.default=d,cc._RF.pop()},{"../lib/qrcode":"qrcode","../peer/PeerConnection":"PeerConnection","../stages/Stage":"Stage","../ui/ButtonClickEvent":"ButtonClickEvent","../ui/PlayerUIMgr":"PlayerUIMgr","./StageMgr":"StageMgr"}],StageMgr:[function(t,e,r){"use strict";cc._RF.push(e,"c5e4fU98b5LsZQwVVubfbVa","StageMgr");var n=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=t("../utils/SingletonNode"),a=t("../ui/LoadingCover"),c=t("../peer/PeerConnection"),u=t("../ui/PlayerUIMgr"),s=t("./Stage"),p=t("./StageHome"),l=t("./StateGame"),f=t("../utils/State"),h=t("../utils/helper"),d=cc._decorator,y=d.ccclass,g=d.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.homeState=null,e.gameState=null,e.coverStage=null,e.mPreviousStage=null,e.mCurrentStage=null,e.mState=f.PeerGameState.PEER_INIT,e.sip=0,e}return n(e,t),Object.defineProperty(e.prototype,"CurrentStage",{get:function(){return this.mCurrentStage},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.mState=-1,this.homeState.node.active=!0,this.gameState.node.active=!1,this.coverStage.active=!1},e.prototype.start=function(){for(var t=0,e=this.node.children;t<e.length;t++){e[t].active=!1}this.show("Home")},e.prototype.onEnable=function(){c.default.Instance&&(c.default.Instance.peer?0===c.default.Instance.sip?this.setState(f.PeerGameState.PEER_INIT):this.waitForConnection():DEBUG?(a.default.Instance.show(),this.loadScript("https://peer.elofun.net/peerclient.js",this.initPeer.bind(this))):this.initPeer())},e.prototype.setState=function(t){if(this.mState!==t){this.mState=t;var e=f.PeerGameState.PEER_INIT,r=f.PeerGameState.WAIT_FOR_CONNECTION,n=(f.PeerGameState.READY_TO_PLAY,f.PeerGameState.PLAYING);f.PeerGameState.GAMEOVER;switch(this.mState){case e:a.default.Instance.show();break;case r:this.homeState.initSIP(),a.default.Instance.hide();break;case n:this.show("Game")}}},e.prototype.waitForConnection=function(){this.setState(f.PeerGameState.WAIT_FOR_CONNECTION)},e.prototype.play=function(){this.setState(f.PeerGameState.PLAYING)},e.prototype.gameover=function(){this.setState(f.PeerGameState.GAMEOVER)},e.prototype.update=function(t){var e=f.PeerGameState.PEER_INIT,r=f.PeerGameState.WAIT_FOR_CONNECTION,n=(f.PeerGameState.READY_TO_PLAY,f.PeerGameState.PLAYING);f.PeerGameState.GAMEOVER;switch(this.mState){case e:0!==c.default.Instance.sip&&this.waitForConnection();break;case r:this.homeState.myUpdate(t);break;case n:this.gameState.myUpdate(t)}u.default.Instance.updatePingPong(t)},e.prototype.show=function(t,e){void 0===e&&(e=.5),this.mPreviousStage=this.mCurrentStage;for(var r=0,n=this.node.children;r<n.length;r++){var o=n[r],i=o.name==t;i&&(this.mCurrentStage=o),o.active!=i&&(o.active=i)}this.mPreviousStage&&this.mCurrentStage&&this.mPreviousStage!=this.mCurrentStage?this.animate(e):this.mCurrentStage.getComponent(s.default).init()},e.prototype.initPeer=function(){window.getPeerClient&&(c.default.Instance.init(),c.default.Instance.peer.on("message",this.onMessage.bind(this)),this.setState(f.PeerGameState.PEER_INIT))},e.prototype.loadScript=function(t,e){var r=document.createElement("script");r.async=!0,r.src=t,r.addEventListener("load",function t(){document.body.removeChild(r),r.removeEventListener("load",t,!1),e&&e()},!1),document.body.appendChild(r)},e.prototype.onMessage=function(t,e){f.PeerGameState.PEER_INIT;var r=f.PeerGameState.WAIT_FOR_CONNECTION,n=(f.PeerGameState.READY_TO_PLAY,f.PeerGameState.PLAYING),o=(f.PeerGameState.GAMEOVER,JSON.parse(t));if(o){switch(this.mState){case r:if(o.type==f.PeerPlayerState.CONNECTING){var i=u.default.Instance.getFreePlayer();i&&(console.log(e),i.readyToPlay(e,{nick:i.nickProfile,color:i.colorProfile.toHEX()}))}break;case n:o.type==f.PeerPlayerState.PLAYING&&u.default.Instance.receivedAction(e,o.data)}this.printMessage(o,e),o.type==f.PeerPlayerState.PING&&u.default.Instance.resetTimerDisconnect(e)}},e.prototype.printMessage=function(t,e){var r=t.type,n=t.data;r!=f.PeerPlayerState.PING&&r!=f.PeerPlayerState.PONG&&(void 0!=n.action&&(n.action=f.PlayerState[n.action]),h.default.log("tv sip="+c.default.Instance.sip+" recieved from sip="+e.remoteSIP+" type="+r+":"+f.PeerPlayerState[r]+" nick="+n.nick+" msg="+JSON.stringify(n)))},e.prototype.animate=function(t){var e=this;this.mPreviousStage.active=!0,this.mCurrentStage.active=!1,this.coverStage.active=!0,cc.tween(this.mPreviousStage).to(t,{scale:this.mPreviousStage.scaleX},{progress:function(t,r,n,o){return e.coverStage.opacity=255*o,t+(r-t)*o}}).call(function(){e.mPreviousStage.active=!1,e.mCurrentStage.active=!0,e.mCurrentStage.getComponent(s.default).init()}).start(),cc.tween(this.mCurrentStage).delay(t).to(t,{scale:this.mCurrentStage.scaleX},{progress:function(t,r,n,o){return e.coverStage.opacity=255*(1-o),t+(r-t)*o}}).call(function(){e.coverStage.active=!1}).start()},o([g(p.default)],e.prototype,"homeState",void 0),o([g(l.default)],e.prototype,"gameState",void 0),o([g(cc.Node)],e.prototype,"coverStage",void 0),e=o([y],e)}(i.default());r.default=v,cc._RF.pop()},{"../peer/PeerConnection":"PeerConnection","../ui/LoadingCover":"LoadingCover","../ui/PlayerUIMgr":"PlayerUIMgr","../utils/SingletonNode":"SingletonNode","../utils/State":"State","../utils/helper":"helper","./Stage":"Stage","./StageHome":"StageHome","./StateGame":"StateGame"}],Stage:[function(t,e,r){"use strict";cc._RF.push(e,"29878RPJUtLTZ+QvMH91UaV","Stage");var n=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,c=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.init=function(){},e=o([a],e)}(cc.Component));r.default=c,cc._RF.pop()},{}],StateGame:[function(t,e,r){"use strict";cc._RF.push(e,"f0109LIaH5KHq/xIN2rkMor","StateGame");var n=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=t("../stages/Stage"),a=t("../game/PlayerMgr"),c=t("../ui/PlayerUIMgr"),u=t("../utils/State"),s=t("../game/DiceMgr"),p=t("../utils/Timer"),l=t("../game/GameDefine"),f=t("../popup/PopupMgr"),h=t("./StageMgr"),d=cc._decorator,y=d.ccclass,g=d.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.players=[],e.currentIndex=-1,e.mState=-1,e.mTimer=new p.default,e}return n(e,t),Object.defineProperty(e.prototype,"Players",{get:function(){return this.players},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.mTimer.SetDuration(l.default.TIME_GAME_PLAY)},e.prototype.onEnable=function(){},e.prototype.start=function(){},e.prototype.init=function(){this.currentIndex=-1,this.currentPlayer=null,this.mState=-1,s.default.Instance.node.active=!1,this.mTimer.Reset(),this.txtTimer.string=String(this.mTimer.GetTime().toFixed(0)+"s"),this.setState(u.GameState.INIT)},e.prototype.myUpdate=function(t){var e=u.GameState.PLAYING,r=u.GameState.TIMEOUT;switch(this.mState){case e:this.currentPlayer&&this.currentPlayer.isMoveComplete()&&this.nextPlayer(),this.mTimer.Update(t),this.mTimer.FirstFinished()&&this.setState(r),this.txtTimer.string=this.mTimer.GetTime().toFixed(0)+"s",this.updateDisconnect()}},e.prototype.updateDisconnect=function(){for(var t=0;t<this.players.length;++t){var e=this.players[t];e.PUI&&(e.PUI.isDisconnect()&&(e.canContinue()&&e.cash(),this.nextPlayer()))}},e.prototype.setState=function(t){var e=this;if(this.mState!=t){this.mState=t;var r=u.GameState.INIT,n=u.GameState.NEXT_PLAYER,o=u.GameState.PLAYING,i=u.GameState.TIMEOUT;switch(this.mState){case r:var s=c.default.Instance.players,p=a.default.Instance.players;this.players=[];for(var l=0;l<s.length;++l){var d=s[l],y=p[l];d.isReadyToPlay()?(d.play(),this.players.push(p[l]),y.setPlayerUI(d)):(y.setPlayerUI(null),d.setReceivedActionCB(null))}this.players.forEach(function(t){t.init()}),this.nextPlayer();break;case n:this.players.forEach(function(t){t==e.currentPlayer?t.requestShakeDice():t.waiting()}),this.setState(o);break;case i:f.default.Instance.push("Popup Gameover"),h.default.Instance.gameover(),this.players.forEach(function(t){t.win(),t.PUI.gameover({action:u.PlayerState.WIN})})}}},e.prototype.nextPlayer=function(){for(this.currentPlayer=null,this.currentIndex++;this.currentIndex<this.players.length;){if(this.players[this.currentIndex].canContinue()){this.currentPlayer=this.players[this.currentIndex];break}this.currentIndex++}if(this.currentPlayer)this.setState(u.GameState.NEXT_PLAYER);else{for(this.currentIndex=0;this.currentIndex<this.players.length;){if(this.players[this.currentIndex].canContinue()){this.currentPlayer=this.players[this.currentIndex];break}this.currentIndex++}this.currentPlayer?this.setState(u.GameState.NEXT_PLAYER):this.setState(u.GameState.TIMEOUT)}},o([g(cc.Node)],e.prototype,"dice",void 0),o([g(cc.Label)],e.prototype,"txtTimer",void 0),e=o([y],e)}(i.default);r.default=v,cc._RF.pop()},{"../game/DiceMgr":"DiceMgr","../game/GameDefine":"GameDefine","../game/PlayerMgr":"PlayerMgr","../popup/PopupMgr":"PopupMgr","../stages/Stage":"Stage","../ui/PlayerUIMgr":"PlayerUIMgr","../utils/State":"State","../utils/Timer":"Timer","./StageMgr":"StageMgr"}],State:[function(t,e,r){"use strict";cc._RF.push(e,"a1d95S2KHFGyp14akqkaTtP","State"),Object.defineProperty(r,"__esModule",{value:!0}),r.PlayerState=r.GameState=r.PeerPlayerState=r.PeerGameState=void 0,r.PeerGameState=cc.Enum({PEER_INIT:0,WAIT_FOR_CONNECTION:1,READY_TO_PLAY:2,PLAYING:3,GAMEOVER:4}),r.PeerPlayerState=cc.Enum({DISCONNECT:0,PEER_INIT:1,CONNECTING:2,READY_TO_PLAY:3,PLAYING:4,GAMEOVER:5,PING:6,PONG:7}),r.GameState=cc.Enum({INIT:0,NEXT_PLAYER:1,PLAYING:2,TIMEOUT:3}),r.PlayerState=cc.Enum({INIT:0,WAITING:1,REQUEST_SHAKE_DICE:2,RESPONSE_SHAKE_DICE:3,MOVE_TO_TARGET:4,MOVE_COMPLETE:5,CRASH:6,WIN:7,LOSE:8}),cc._RF.pop()},{}],StopOver:[function(t,e,r){"use strict";cc._RF.push(e,"9626eZHJzZIOoSJm2op3QSF","StopOver"),Object.defineProperty(r,"__esModule",{value:!0});var n=t("../utils/Point"),o=function(){return function(){this.point=new n.default}}();r.default=o,cc._RF.pop()},{"../utils/Point":"Point"}],Timer:[function(t,e,r){"use strict";cc._RF.push(e,"96ce62t7XdKk7fQzIESKhSW","Timer"),Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function t(){this.timer=0,this.duration=0,this.overhead=0,this.isDone=!0}return t.prototype.SetDuration=function(t){this.timer=t,this.duration=t,this.overhead=0,this.isDone=!1},t.prototype.GetDuration=function(){return this.duration},t.prototype.GetTime=function(){return this.timer},t.prototype.GetPercent=function(){return this.timer/this.duration},t.prototype.Reset=function(){this.timer=this.duration,this.overhead=0,this.isDone=!1},t.prototype.IsDone=function(){return 0===this.timer},t.prototype.FirstFinished=function(){return!(this.timer>0)&&(!this.isDone&&(this.isDone=!0,!0))},t.prototype.GetOverhead=function(){return this.overhead},t.prototype.Update=function(t){0!==this.timer&&(this.timer-=t,this.timer<0&&(this.overhead=-this.timer,this.timer=0))},t}();r.default=n,cc._RF.pop()},{}],helper:[function(t,e,r){"use strict";cc._RF.push(e,"59963UuWwBCYZGo2zb1ah6r","helper"),Object.defineProperty(r,"__esModule",{value:!0}),r.default={log:function(t){DEBUG&&console.log(t)},RandInt:function(t,e){return Math.floor(Math.random()*(e-t+1)+t)}},cc._RF.pop()},{}],qrcode:[function(t,e,r){"use strict";cc._RF.push(e,"580deMYQ1dHUJHya3VuxtbA","qrcode");var n=function(){var t=function(t,e){var r=t,n=i[e],o=null,a=0,c=null,u=[],s={},p=function(t,e){o=function(t){for(var e=new Array(t),r=0;r<t;r+=1){e[r]=new Array(t);for(var n=0;n<t;n+=1)e[r][n]=null}return e}(a=4*r+17),l(0,0),l(a-7,0),l(0,a-7),y(),h(),b(t,e),r>=7&&C(t),null==c&&(c=R(r,n,u)),I(c,e)},l=function(t,e){for(var r=-1;r<=7;r+=1)if(!(t+r<=-1||a<=t+r))for(var n=-1;n<=7;n+=1)e+n<=-1||a<=e+n||(o[t+r][e+n]=0<=r&&r<=6&&(0==n||6==n)||0<=n&&n<=6&&(0==r||6==r)||2<=r&&r<=4&&2<=n&&n<=4)},f=function(){for(var t=0,e=0,r=0;r<8;r+=1){p(!0,r);var n=d.getLostPoint(s);(0==r||t>n)&&(t=n,e=r)}return e},h=function(){for(var t=8;t<a-8;t+=1)null==o[t][6]&&(o[t][6]=t%2==0);for(var e=8;e<a-8;e+=1)null==o[6][e]&&(o[6][e]=e%2==0)},y=function(){for(var t=d.getPatternPosition(r),e=0;e<t.length;e+=1)for(var n=0;n<t.length;n+=1){var i=t[e],a=t[n];if(null==o[i][a])for(var c=-2;c<=2;c+=1)for(var u=-2;u<=2;u+=1)o[i+c][a+u]=-2==c||2==c||-2==u||2==u||0==c&&0==u}},C=function(t){for(var e=d.getBCHTypeNumber(r),n=0;n<18;n+=1){var i=!t&&1==(e>>n&1);o[Math.floor(n/3)][n%3+a-8-3]=i}for(n=0;n<18;n+=1){i=!t&&1==(e>>n&1);o[n%3+a-8-3][Math.floor(n/3)]=i}},b=function(t,e){for(var r=n<<3|e,i=d.getBCHTypeInfo(r),c=0;c<15;c+=1){var u=!t&&1==(i>>c&1);c<6?o[c][8]=u:c<8?o[c+1][8]=u:o[a-15+c][8]=u}for(c=0;c<15;c+=1){u=!t&&1==(i>>c&1);c<8?o[8][a-c-1]=u:c<9?o[8][15-c-1+1]=u:o[8][15-c-1]=u}o[a-8][8]=!t},I=function(t,e){for(var r=-1,n=a-1,i=7,c=0,u=d.getMaskFunction(e),s=a-1;s>0;s-=2)for(6==s&&(s-=1);;){for(var p=0;p<2;p+=1)if(null==o[n][s-p]){var l=!1;c<t.length&&(l=1==(t[c]>>>i&1)),u(n,s-p)&&(l=!l),o[n][s-p]=l,-1==(i-=1)&&(c+=1,i=7)}if((n+=r)<0||a<=n){n-=r,r=-r;break}}},w=function(t,e){for(var r=0,n=0,o=0,i=new Array(e.length),a=new Array(e.length),c=0;c<e.length;c+=1){var u=e[c].dataCount,s=e[c].totalCount-u;n=Math.max(n,u),o=Math.max(o,s),i[c]=new Array(u);for(var p=0;p<i[c].length;p+=1)i[c][p]=255&t.getBuffer()[p+r];r+=u;var l=d.getErrorCorrectPolynomial(s),f=g(i[c],l.getLength()-1).mod(l);a[c]=new Array(l.getLength()-1);for(p=0;p<a[c].length;p+=1){var h=p+f.getLength()-a[c].length;a[c][p]=h>=0?f.getAt(h):0}}var y=0;for(p=0;p<e.length;p+=1)y+=e[p].totalCount;var v=new Array(y),P=0;for(p=0;p<n;p+=1)for(c=0;c<e.length;c+=1)p<i[c].length&&(v[P]=i[c][p],P+=1);for(p=0;p<o;p+=1)for(c=0;c<e.length;c+=1)p<a[c].length&&(v[P]=a[c][p],P+=1);return v},R=function(t,e,r){for(var n=v.getRSBlocks(t,e),o=P(),i=0;i<r.length;i+=1){var a=r[i];o.put(a.getMode(),4),o.put(a.getLength(),d.getLengthInBits(a.getMode(),t)),a.write(o)}var c=0;for(i=0;i<n.length;i+=1)c+=n[i].dataCount;if(o.getLengthInBits()>8*c)throw"code length overflow. ("+o.getLengthInBits()+">"+8*c+")";for(o.getLengthInBits()+4<=8*c&&o.put(0,4);o.getLengthInBits()%8!=0;)o.putBit(!1);for(;!(o.getLengthInBits()>=8*c||(o.put(236,8),o.getLengthInBits()>=8*c));)o.put(17,8);return w(o,n)};s.addData=function(t,e){var r=null;switch(e=e||"Byte"){case"Numeric":r=_(t);break;case"Alphanumeric":r=S(t);break;case"Byte":r=m(t);break;case"Kanji":r=O(t);break;default:throw"mode:"+e}u.push(r),c=null},s.isDark=function(t,e){if(t<0||a<=t||e<0||a<=e)throw t+","+e;return o[t][e]},s.getModuleCount=function(){return a},s.make=function(){if(r<1){for(var t=1;t<40;t++){for(var e=v.getRSBlocks(t,n),o=P(),i=0;i<u.length;i++){var a=u[i];o.put(a.getMode(),4),o.put(a.getLength(),d.getLengthInBits(a.getMode(),t)),a.write(o)}var c=0;for(i=0;i<e.length;i++)c+=e[i].dataCount;if(o.getLengthInBits()<=8*c)break}r=t}p(!1,f())},s.createTableTag=function(t,e){t=t||2;var r="";r+='<table style="',r+=" border-width: 0px; border-style: none;",r+=" border-collapse: collapse;",r+=" padding: 0px; margin: "+(e=void 0===e?4*t:e)+"px;",r+='">',r+="<tbody>";for(var n=0;n<s.getModuleCount();n+=1){r+="<tr>";for(var o=0;o<s.getModuleCount();o+=1)r+='<td style="',r+=" border-width: 0px; border-style: none;",r+=" border-collapse: collapse;",r+=" padding: 0px; margin: 0px;",r+=" width: "+t+"px;",r+=" height: "+t+"px;",r+=" background-color: ",r+=s.isDark(n,o)?"#000000":"#ffffff",r+=";",r+='"/>';r+="</tr>"}return r+="</tbody>",r+="</table>"},s.createSvgTag=function(t,e,r,n){var o={};"object"==typeof arguments[0]&&(t=(o=arguments[0]).cellSize,e=o.margin,r=o.alt,n=o.title),t=t||2,e=void 0===e?4*t:e,(r="string"==typeof r?{text:r}:r||{}).text=r.text||null,r.id=r.text?r.id||"qrcode-description":null,(n="string"==typeof n?{text:n}:n||{}).text=n.text||null,n.id=n.text?n.id||"qrcode-title":null;var i,a,c,u,p=s.getModuleCount()*t+2*e,l="";for(u="l"+t+",0 0,"+t+" -"+t+",0 0,-"+t+"z ",l+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',l+=o.scalable?"":' width="'+p+'px" height="'+p+'px"',l+=' viewBox="0 0 '+p+" "+p+'" ',l+=' preserveAspectRatio="xMinYMin meet"',l+=n.text||r.text?' role="img" aria-labelledby="'+A([n.id,r.id].join(" ").trim())+'"':"",l+=">",l+=n.text?'<title id="'+A(n.id)+'">'+A(n.text)+"</title>":"",l+=r.text?'<description id="'+A(r.id)+'">'+A(r.text)+"</description>":"",l+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',l+='<path d="',a=0;a<s.getModuleCount();a+=1)for(c=a*t+e,i=0;i<s.getModuleCount();i+=1)s.isDark(a,i)&&(l+="M"+(i*t+e)+","+c+u);return l+='" stroke="transparent" fill="black"/>',l+="</svg>"},s.createDataURL=function(t,e){t=t||2,e=void 0===e?4*t:e;var r=s.getModuleCount()*t+2*e,n=e,o=r-e;return E(r,r,function(e,r){if(n<=e&&e<o&&n<=r&&r<o){var i=Math.floor((e-n)/t),a=Math.floor((r-n)/t);return s.isDark(a,i)?0:1}return 1})},s.createImgTag=function(t,e,r){t=t||2,e=void 0===e?4*t:e;var n=s.getModuleCount()*t+2*e,o="";return o+="<img",o+=' src="',o+=s.createDataURL(t,e),o+='"',o+=' width="',o+=n,o+='"',o+=' height="',o+=n,o+='"',r&&(o+=' alt="',o+=A(r),o+='"'),o+="/>"};var A=function(t){for(var e="",r=0;r<t.length;r+=1){var n=t.charAt(r);switch(n){case"<":e+="&lt;";break;case">":e+="&gt;";break;case"&":e+="&amp;";break;case'"':e+="&quot;";break;default:e+=n}}return e},M=function(t){t=void 0===t?2:t;var e,r,n,o,i,a=1*s.getModuleCount()+2*t,c=t,u=a-t,p={"\u2588\u2588":"\u2588","\u2588 ":"\u2580"," \u2588":"\u2584","  ":" "},l={"\u2588\u2588":"\u2580","\u2588 ":"\u2580"," \u2588":" ","  ":" "},f="";for(e=0;e<a;e+=2){for(n=Math.floor((e-c)/1),o=Math.floor((e+1-c)/1),r=0;r<a;r+=1)i="\u2588",c<=r&&r<u&&c<=e&&e<u&&s.isDark(n,Math.floor((r-c)/1))&&(i=" "),c<=r&&r<u&&c<=e+1&&e+1<u&&s.isDark(o,Math.floor((r-c)/1))?i+=" ":i+="\u2588",f+=t<1&&e+1>=u?l[i]:p[i];f+="\n"}return a%2&&t>0?f.substring(0,f.length-a-1)+Array(a+1).join("\u2580"):f.substring(0,f.length-1)};return s.createASCII=function(t,e){if((t=t||1)<2)return M(e);t-=1,e=void 0===e?2*t:e;var r,n,o,i,a=s.getModuleCount()*t+2*e,c=e,u=a-e,p=Array(t+1).join("\u2588\u2588"),l=Array(t+1).join("  "),f="",h="";for(r=0;r<a;r+=1){for(o=Math.floor((r-c)/t),h="",n=0;n<a;n+=1)i=1,c<=n&&n<u&&c<=r&&r<u&&s.isDark(o,Math.floor((n-c)/t))&&(i=0),h+=i?p:l;for(o=0;o<t;o+=1)f+=h+"\n"}return f.substring(0,f.length-1)},s.renderTo2dContext=function(t,e){e=e||2;for(var r=s.getModuleCount(),n=0;n<r;n++)for(var o=0;o<r;o++)t.fillStyle=s.isDark(n,o)?"black":"white",t.fillRect(n*e,o*e,e,e)},s};t.stringToBytes=(t.stringToBytesFuncs={default:function(t){for(var e=[],r=0;r<t.length;r+=1){var n=t.charCodeAt(r);e.push(255&n)}return e}}).default,t.createStringToBytes=function(t,e){var r=function(){for(var r=I(t),n=function(){var t=r.read();if(-1==t)throw"eof";return t},o=0,i={};;){var a=r.read();if(-1==a)break;var c=n(),u=n()<<8|n();i[String.fromCharCode(a<<8|c)]=u,o+=1}if(o!=e)throw o+" != "+e;return i}(),n="?".charCodeAt(0);return function(t){for(var e=[],o=0;o<t.length;o+=1){var i=t.charCodeAt(o);if(i<128)e.push(i);else{var a=r[t.charAt(o)];"number"==typeof a?(255&a)==a?e.push(a):(e.push(a>>>8),e.push(255&a)):e.push(n)}}return e}};var e=1,r=2,n=4,o=8,i={L:1,M:0,Q:3,H:2},a=0,c=1,u=2,s=3,p=4,l=5,f=6,h=7,d=function(){var t=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],i={},d=function(t){for(var e=0;0!=t;)e+=1,t>>>=1;return e};return i.getBCHTypeInfo=function(t){for(var e=t<<10;d(e)-d(1335)>=0;)e^=1335<<d(e)-d(1335);return 21522^(t<<10|e)},i.getBCHTypeNumber=function(t){for(var e=t<<12;d(e)-d(7973)>=0;)e^=7973<<d(e)-d(7973);return t<<12|e},i.getPatternPosition=function(e){return t[e-1]},i.getMaskFunction=function(t){switch(t){case a:return function(t,e){return(t+e)%2==0};case c:return function(t,e){return t%2==0};case u:return function(t,e){return e%3==0};case s:return function(t,e){return(t+e)%3==0};case p:return function(t,e){return(Math.floor(t/2)+Math.floor(e/3))%2==0};case l:return function(t,e){return t*e%2+t*e%3==0};case f:return function(t,e){return(t*e%2+t*e%3)%2==0};case h:return function(t,e){return(t*e%3+(t+e)%2)%2==0};default:throw"bad maskPattern:"+t}},i.getErrorCorrectPolynomial=function(t){for(var e=g([1],0),r=0;r<t;r+=1)e=e.multiply(g([1,y.gexp(r)],0));return e},i.getLengthInBits=function(t,i){if(1<=i&&i<10)switch(t){case e:return 10;case r:return 9;case n:case o:return 8;default:throw"mode:"+t}else if(i<27)switch(t){case e:return 12;case r:return 11;case n:return 16;case o:return 10;default:throw"mode:"+t}else{if(!(i<41))throw"type:"+i;switch(t){case e:return 14;case r:return 13;case n:return 16;case o:return 12;default:throw"mode:"+t}}},i.getLostPoint=function(t){for(var e=t.getModuleCount(),r=0,n=0;n<e;n+=1)for(var o=0;o<e;o+=1){for(var i=0,a=t.isDark(n,o),c=-1;c<=1;c+=1)if(!(n+c<0||e<=n+c))for(var u=-1;u<=1;u+=1)o+u<0||e<=o+u||0==c&&0==u||a==t.isDark(n+c,o+u)&&(i+=1);i>5&&(r+=3+i-5)}for(n=0;n<e-1;n+=1)for(o=0;o<e-1;o+=1){var s=0;t.isDark(n,o)&&(s+=1),t.isDark(n+1,o)&&(s+=1),t.isDark(n,o+1)&&(s+=1),t.isDark(n+1,o+1)&&(s+=1),0!=s&&4!=s||(r+=3)}for(n=0;n<e;n+=1)for(o=0;o<e-6;o+=1)t.isDark(n,o)&&!t.isDark(n,o+1)&&t.isDark(n,o+2)&&t.isDark(n,o+3)&&t.isDark(n,o+4)&&!t.isDark(n,o+5)&&t.isDark(n,o+6)&&(r+=40);for(o=0;o<e;o+=1)for(n=0;n<e-6;n+=1)t.isDark(n,o)&&!t.isDark(n+1,o)&&t.isDark(n+2,o)&&t.isDark(n+3,o)&&t.isDark(n+4,o)&&!t.isDark(n+5,o)&&t.isDark(n+6,o)&&(r+=40);var p=0;for(o=0;o<e;o+=1)for(n=0;n<e;n+=1)t.isDark(n,o)&&(p+=1);return r+=10*(Math.abs(100*p/e/e-50)/5)},i}(),y=function(){for(var t=new Array(256),e=new Array(256),r=0;r<8;r+=1)t[r]=1<<r;for(r=8;r<256;r+=1)t[r]=t[r-4]^t[r-5]^t[r-6]^t[r-8];for(r=0;r<255;r+=1)e[t[r]]=r;var n={glog:function(t){if(t<1)throw"glog("+t+")";return e[t]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return t[e]}};return n}();function g(t,e){if(void 0===t.length)throw t.length+"/"+e;var r=function(){for(var r=0;r<t.length&&0==t[r];)r+=1;for(var n=new Array(t.length-r+e),o=0;o<t.length-r;o+=1)n[o]=t[o+r];return n}(),n={getAt:function(t){return r[t]},getLength:function(){return r.length},multiply:function(t){for(var e=new Array(n.getLength()+t.getLength()-1),r=0;r<n.getLength();r+=1)for(var o=0;o<t.getLength();o+=1)e[r+o]^=y.gexp(y.glog(n.getAt(r))+y.glog(t.getAt(o)));return g(e,0)},mod:function(t){if(n.getLength()-t.getLength()<0)return n;for(var e=y.glog(n.getAt(0))-y.glog(t.getAt(0)),r=new Array(n.getLength()),o=0;o<n.getLength();o+=1)r[o]=n.getAt(o);for(o=0;o<t.getLength();o+=1)r[o]^=y.gexp(y.glog(t.getAt(o))+e);return g(r,0).mod(t)}};return n}var v=function(){var t=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],e=function(t,e){var r={};return r.totalCount=t,r.dataCount=e,r},r={},n=function(e,r){switch(r){case i.L:return t[4*(e-1)+0];case i.M:return t[4*(e-1)+1];case i.Q:return t[4*(e-1)+2];case i.H:return t[4*(e-1)+3];default:return}};return r.getRSBlocks=function(t,r){var o=n(t,r);if(void 0===o)throw"bad rs block @ typeNumber:"+t+"/errorCorrectionLevel:"+r;for(var i=o.length/3,a=[],c=0;c<i;c+=1)for(var u=o[3*c+0],s=o[3*c+1],p=o[3*c+2],l=0;l<u;l+=1)a.push(e(s,p));return a},r}(),P=function(){var t=[],e=0,r={getBuffer:function(){return t},getAt:function(e){var r=Math.floor(e/8);return 1==(t[r]>>>7-e%8&1)},put:function(t,e){for(var n=0;n<e;n+=1)r.putBit(1==(t>>>e-n-1&1))},getLengthInBits:function(){return e},putBit:function(r){var n=Math.floor(e/8);t.length<=n&&t.push(0),r&&(t[n]|=128>>>e%8),e+=1}};return r},_=function(t){var r=e,n=t,o={getMode:function(){return r},getLength:function(t){return n.length},write:function(t){for(var e=n,r=0;r+2<e.length;)t.put(i(e.substring(r,r+3)),10),r+=3;r<e.length&&(e.length-r==1?t.put(i(e.substring(r,r+1)),4):e.length-r==2&&t.put(i(e.substring(r,r+2)),7))}},i=function(t){for(var e=0,r=0;r<t.length;r+=1)e=10*e+a(t.charAt(r));return e},a=function(t){if("0"<=t&&t<="9")return t.charCodeAt(0)-"0".charCodeAt(0);throw"illegal char :"+t};return o},S=function(t){var e=r,n=t,o={getMode:function(){return e},getLength:function(t){return n.length},write:function(t){for(var e=n,r=0;r+1<e.length;)t.put(45*i(e.charAt(r))+i(e.charAt(r+1)),11),r+=2;r<e.length&&t.put(i(e.charAt(r)),6)}},i=function(t){if("0"<=t&&t<="9")return t.charCodeAt(0)-"0".charCodeAt(0);if("A"<=t&&t<="Z")return t.charCodeAt(0)-"A".charCodeAt(0)+10;switch(t){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+t}};return o},m=function(e){var r=n,o=t.stringToBytes(e),i={getMode:function(){return r},getLength:function(t){return o.length},write:function(t){for(var e=0;e<o.length;e+=1)t.put(o[e],8)}};return i},O=function(e){var r=o,n=t.stringToBytesFuncs.SJIS;if(!n)throw"sjis not supported.";!function(t,e){var r=n("\u53cb");if(2!=r.length||38726!=(r[0]<<8|r[1]))throw"sjis not supported."}();var i=n(e),a={getMode:function(){return r},getLength:function(t){return~~(i.length/2)},write:function(t){for(var e=i,r=0;r+1<e.length;){var n=(255&e[r])<<8|255&e[r+1];if(33088<=n&&n<=40956)n-=33088;else{if(!(57408<=n&&n<=60351))throw"illegal char at "+(r+1)+"/"+n;n-=49472}n=192*(n>>>8&255)+(255&n),t.put(n,13),r+=2}if(r<e.length)throw"illegal char at "+(r+1)}};return a},C=function(){var t=[],e={writeByte:function(e){t.push(255&e)},writeShort:function(t){e.writeByte(t),e.writeByte(t>>>8)},writeBytes:function(t,r,n){r=r||0,n=n||t.length;for(var o=0;o<n;o+=1)e.writeByte(t[o+r])},writeString:function(t){for(var r=0;r<t.length;r+=1)e.writeByte(t.charCodeAt(r))},toByteArray:function(){return t},toString:function(){var e="";e+="[";for(var r=0;r<t.length;r+=1)r>0&&(e+=","),e+=t[r];return e+="]"}};return e},b=function(){var t=0,e=0,r=0,n="",o={},i=function(t){n+=String.fromCharCode(a(63&t))},a=function(t){if(t<0);else{if(t<26)return 65+t;if(t<52)return t-26+97;if(t<62)return t-52+48;if(62==t)return 43;if(63==t)return 47}throw"n:"+t};return o.writeByte=function(n){for(t=t<<8|255&n,e+=8,r+=1;e>=6;)i(t>>>e-6),e-=6},o.flush=function(){if(e>0&&(i(t<<6-e),t=0,e=0),r%3!=0)for(var o=3-r%3,a=0;a<o;a+=1)n+="="},o.toString=function(){return n},o},I=function(t){var e=t,r=0,n=0,o=0,i={read:function(){for(;o<8;){if(r>=e.length){if(0==o)return-1;throw"unexpected end of file./"+o}var t=e.charAt(r);if(r+=1,"="==t)return o=0,-1;t.match(/^\s$/)||(n=n<<6|a(t.charCodeAt(0)),o+=6)}var i=n>>>o-8&255;return o-=8,i}},a=function(t){if(65<=t&&t<=90)return t-65;if(97<=t&&t<=122)return t-97+26;if(48<=t&&t<=57)return t-48+52;if(43==t)return 62;if(47==t)return 63;throw"c:"+t};return i},w=function(t,e){var r=t,n=e,o=new Array(t*e),i={setPixel:function(t,e,n){o[e*r+t]=n},write:function(t){t.writeString("GIF87a"),t.writeShort(r),t.writeShort(n),t.writeByte(128),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(255),t.writeByte(255),t.writeByte(255),t.writeString(","),t.writeShort(0),t.writeShort(0),t.writeShort(r),t.writeShort(n),t.writeByte(0);var e=c(2);t.writeByte(2);for(var o=0;e.length-o>255;)t.writeByte(255),t.writeBytes(e,o,255),o+=255;t.writeByte(e.length-o),t.writeBytes(e,o,e.length-o),t.writeByte(0),t.writeString(";")}},a=function(t){var e=t,r=0,n=0,o={write:function(t,o){if(t>>>o!=0)throw"length over";for(;r+o>=8;)e.writeByte(255&(t<<r|n)),o-=8-r,t>>>=8-r,n=0,r=0;n|=t<<r,r+=o},flush:function(){r>0&&e.writeByte(n)}};return o},c=function(t){for(var e=1<<t,r=1+(1<<t),n=t+1,i=u(),c=0;c<e;c+=1)i.add(String.fromCharCode(c));i.add(String.fromCharCode(e)),i.add(String.fromCharCode(r));var s=C(),p=a(s);p.write(e,n);var l=0,f=String.fromCharCode(o[l]);for(l+=1;l<o.length;){var h=String.fromCharCode(o[l]);l+=1,i.contains(f+h)?f+=h:(p.write(i.indexOf(f),n),i.size()<4095&&(i.size()==1<<n&&(n+=1),i.add(f+h)),f=h)}return p.write(i.indexOf(f),n),p.write(r,n),p.flush(),s.toByteArray()},u=function(){var t={},e=0,r={add:function(n){if(r.contains(n))throw"dup key:"+n;t[n]=e,e+=1},size:function(){return e},indexOf:function(e){return t[e]},contains:function(e){return void 0!==t[e]}};return r};return i},E=function(t,e,r){for(var n=w(t,e),o=0;o<e;o+=1)for(var i=0;i<t;i+=1)n.setPixel(i,o,r(i,o));var a=C();n.write(a);for(var c=b(),u=a.toByteArray(),s=0;s<u.length;s+=1)c.writeByte(u[s]);return c.flush(),"data:image/gif;base64,"+c};return t}();n.stringToBytesFuncs["UTF-8"]=function(t){return function(t){for(var e=[],r=0;r<t.length;r++){var n=t.charCodeAt(r);n<128?e.push(n):n<2048?e.push(192|n>>6,128|63&n):n<55296||n>=57344?e.push(224|n>>12,128|n>>6&63,128|63&n):(r++,n=65536+((1023&n)<<10|1023&t.charCodeAt(r)),e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|63&n))}return e}(t)},function(t){"function"==typeof define&&define.amd?define([],t):"object"==typeof r&&(e.exports=t())}(function(){return n}),cc._RF.pop()},{}]},{},["DiceMgr","GameDefine","Location","MapMgr","Player","PlayerMgr","StopOver","qrcode","PeerConnection","PopupGameOver","PopupMgr","Stage","StageHome","StageMgr","StateGame","ButtonClickEvent","LoadingCover","PlayerUI","PlayerUIMgr","CancelUnderTouch","Point","Singleton","SingletonNode","Spinner","State","Timer","helper"]);